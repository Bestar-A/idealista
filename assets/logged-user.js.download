{var modules=window.modules||{},modules=((()=>{var c,s,n,e,t,o,i,l,r={com:"es",it:"it",pt:"pt",ac:"es",ag:"es",bz:"it",cz:"pt",bo:"it"};function u(){var e="";if($("html").attr("lang"))e="_"+$("html").attr("lang");else if(window.djConfig)window.djConfig.languageDefault&&(e="_"+window.djConfig.languageDefault);else if($("html").attr("class"))for(var t=$("html").attr("class").split(" "),n=0,o=t.length;n<o;n++){2===t[n].length&&(e="_"+t[n]);break}return e=e&&""!==e&&-1!=="_es,_it,_pt,_ca,_en,_fr,_de,_da,_fi,_nl,_pl,_ro,_ru,_sv,_zh,_no,_el,_uk".indexOf(e)?e:"_es"}function a(){var e,t=n[2].split(".")[2];return r[t]||(0<(e=$("html").attr("env")).length?e:"es")}function d(e,t){if(!e.is("textarea"))throw new TypeError("[data-chars-counter] attribute only can be used in textarea");var n=e.data("char-width")?e.data("char-width"):1,o=+e.attr("maxlength"),i=e.val().length,r=(i*=n,+e.attr("data-chars-counter-show")||0);!r||o-i<=r?t.html(i+"/"+o):t.html("")}modules.utils=modules.utils||($(document).on("touchstart",function e(){modules.utils.isTouchDevice=!0,$(document).trigger("touchDeviceDetected"),$(document).off("touchstart",e)}),$(document).on("mousemove",function e(){modules.utils.isTouchDevice&&$(document).trigger("touchDeviceDetected"),$(document).off("mousemove",e)}),c=[],s=[],n=window.location.href.split("/"),o=""+ +new Date,0<(e=$("link").filter(function(){return-1!==this.href.indexOf(".idealista.")&&-1!==this.href.indexOf("?")})).length&&(o=e[0].href.split("?")[1]),i="",t=$("link").filter(function(){return"stylesheet"===this.getAttribute("rel").toLowerCase()&&-1!==this.getAttribute("href").indexOf(".idealista.")}),i=0<t.length?"//"+t[0].href.split("/")[2]:-1===$('link[rel="stylesheet"]')[0].href.indexOf("st1.idealista.com")?"//"+$('link[rel="stylesheet"]')[0].href.split("/")[2]:"//st3.idealista.com",{pageTimeStamp:o,cdnHost:i,isTouchDevice:!(l=[]),domainEnv:$("html").attr("env")||"es",isCharASpace:function(e){return" "===e},hasTrailingSpace:function(e){return this.isCharASpace(e[e.length-1])},hasStartingSpace:function(e){return this.isCharASpace(e[0])},generateUniqueId:function(e){return e+Math.random().toString(36).slice(2)+"gid"},isArray:function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},pseudoToArray:function(e){for(var t=[],n=0,o=e.length;n<o;n++)t.push(e[n]);return t},parserPseudoToArray:function(e,t,n){for(var o=[],i=t,r=e.length;i<r;i++)-1===e[i].className.indexOf("hide")&&o.length!==n&&o.push(e[i]);return o},removeClass:function(e,t){for(var n=0,o=e.length;n<o;n++)e[n].className=e[n].className.replace(t,"");return e},i18n:{},defaulti18n:{},geti18nProperty:function(e){return modules.utils.i18n[e]||modules.utils.defaulti18n[e]},_loadLanguageFileFromUrl:function(e,t,n,a){return e.indexOf(n)<0?(e.push(n),n=modules.utils.cdnHost+"/static/common/i18n/"+n+t+".properties?"+modules.utils.pageTimeStamp,$.ajax(n,{method:"GET",dataType:"text",success:function(e){for(var t=a,n=e.replace(/#.*?$/gm,"").split(/[\r\n]+/g),o=0,i=n.length;o<i;o++){var r=n[o],s=r.match(/^\s*(\S*)\s*=\s*(.*?)\s*$/);s&&3===s.length&&(t[s[1]]=s[2])}},error:function(e,t,n){}})):$},loadLanguageFile:function(e,t,n,o,i){modules.utils.isArray(e)||(e=[e]);for(var r=0,s=(e=n?e.map(function(e){return modules.utils.domainEnv+"/"+e}):e).length;r<s;r++){var a=o||u();l.push(this._loadLanguageFileFromUrl(c,a=o?"_"+a:a,e[r],modules.utils.i18n))}t&&!i?$.when.apply($,l).done(t):t&&i&&$.when.apply($,l).done(t).fail(i)},getSiteLanguage:a,getHTMLAttributeLang:function(){return $("html").attr("lang")},withDefaultLang:function(r){return function(e,t,n){modules.utils.isArray(e)||(e=[e]);for(var o=0,i=(e=n?e.map(function(e){return modules.utils.domainEnv+"/"+e}):e).length;o<i;o++)l.push(this._loadLanguageFileFromUrl(c,u(),e[o],modules.utils.i18n)),this.getHTMLAttributeLang()!==a()&&l.push(this._loadLanguageFileFromUrl(s,"_"+r,e[o],modules.utils.defaulti18n));t&&$.when.apply($,l).done(t)}},loadLanguageAndDefaultLanguageFile:function(e,t,n){return this.withDefaultLang(a()).call(this,e,t,n)},loadLanguageWithDefaultEnglish:function(e,t,n){return this.withDefaultLang("en").call(this,e,t,n)},makeObservable:function(a,t){t=t||[],a.getEvents=function(){return t},a.firesEvent=function(e){return-1!==t.join().indexOf(e)},a.on=function(e,t,n){this.observers=this.observers||{};for(var o=0,i=(e=e.split(" ")).length;o<i;o++)this.observers[e[o]]=this.observers[e[o]]||[],this.observers[e[o]].push({callback:t,context:n});return a},a.off=function(e,t,n){if(this.observers){for(var o=0,i=(e=e.split(" ")).length;o<i;o++)if(this.observers[e[o]])for(var r=0,s=this.observers[e[o]].length;r<s;r++)if(this.observers[e[o]][r].context===n&&this.observers[e[o]][r].callback.toString()===t.toString()){this.observers[e[o]].splice(r,1);break}return a}};return a.trigger=function(e){var t=[].slice.call(arguments,1);if(modules.utils.isArray(t[0])&&(t=t[0]),this.observers&&this.observers[e])for(var n=0,o=this.observers[e].length;n<o;n++)setTimeout(((e,t)=>function(){e.callback.apply(e.context,t)})(this.observers[e][n],t),10)},a.triggerSync=function(e){var t=[].slice.call(arguments,1);if(modules.utils.isArray(t[0])&&(t=t[0]),this.observers&&this.observers[e])for(var n=0,o=this.observers[e].length;n<o;n++)this.observers[e][n].callback.apply(this.observers[e][n].context,t)},a},debounce:function(t,n,o){var i;return function(){clearTimeout(i);var e=arguments;i=setTimeout(function(){t.apply(o,e)},n)}},throttle:function(n,o,i){var r,s;return o=o||250,function(){var e=+new Date,t=arguments;r&&e<r+o?(clearTimeout(s),s=setTimeout(function(){r=e,n.apply(i,t)},o)):(r=e,n.apply(i,t))}},stripHTML:function(e){if(void 0!==e)return e.toString().replace(/<\S[^><]*>/g,"");throw Error("[utils.stripHTML]: String can't be undefined")},formatAsThousands:function(e,t={}){var n,o=t.formatBasedOnLang||!1,i=this.getHTMLAttributeLang(),r=o&&{en:",",zh:",",fr:" ",sv:" ",ru:" ",fi:" ",no:" ",pl:" "}[i]||".",s=!o||"en"!==i&&"zh"!==i;if(void 0===e)throw Error("[utils.formatAsThousands]: String canÂ´t be undefined");for(;1<e.length&&"0"===e.charAt(0)&&","!==e.charAt(1);)e=e.substring(1);-1!==e.indexOf(",")&&s?3<(n=e.replace(/\./g,"").replace(/,/,".")).length-n.indexOf(".")&&(n=n.substring(0,n.indexOf(".")+3)):n=e.indexOf(".")!==e.lastIndexOf(".")||-1!==e.indexOf(".")&&3<e.length-e.lastIndexOf(".")?e.replace(/\./g,""):e;for(var a=(n=n.split("."))[0].replace(/\D/g,""),c="",l=0,u=a.length;0<u;u--)l%3==0&&0!==l&&(c=r+c),l++,c=a.substring(u-1,u)+c;return 1<n.length&&(c+=","+n[1].replace(/\D/g,"")),c=","===c.charAt(0)?"0"+c:c},loadingByEl:{show:function(e,t){if(!e||!$(e).length)throw new TypeError(e+" is not defined or does not exist in dom.");var n=t.blockLayer,o=t.fixed,i=t.iconStyle,r=[];if(n&&$(e).addClass("loadingEl").append('<div class="loadingRemove blockLayer"></div>'),"object"==typeof i&&!$.isEmptyObject(i))for(var s in i)r.push(s+":"+i[s]);$.when(void $(e).addClass("loadingEl").append('<div class="loadingRemove loading" '+(!0===o?'style="position:fixed"':"")+'><span class="icon" '+(r.length?'style=" '+r.join("; ")+' "':"")+"></span></div>")).then(function(){$(".loading",e).css({"margin-left":"-"+$(".icon",e).width()/2+"px","margin-top":"-"+$(".icon",e).height()/2+"px"})})},hide:function(e){$(e).removeClass("loadingEl").find(".loadingRemove").remove()}},textLimiter:function(e,t,n){var o=e.trim(),i=+t,r=n?"...":".";if(i)return o.length>i?o.substring(0,i)+r:o;throw new ReferenceError("CharacterLimit cannot be empty.")},serializeObject:function(e){var t={},n=e.serializeArray();return $.each(n,function(){void 0!==t[this.name]?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||""}),t},getMedia:function(){return matchMedia(config.mediaMobile).matches?"MOBILE":matchMedia(config.mediaTablet).matches?"TABLET":matchMedia(config.mediaDesktop).matches?"DESKTOP":"MOBILE"},getMediaOrientation:function(){return matchMedia(config.mediaLandscape).matches?"LANDSCAPE":"PORTRAIT"},toggleContainers:function(e){var t=e.toHide,n=e.toShow;0<t.length&&$.each(t,function(e,t){$(t).addClass("d-none").hide()}),0<n.length&&$.each(n,function(e,t){$(t).removeClass("d-none").show()})},hasBeenDone:function(e){var t=$(e);return!!t.data("hasBeenDone")||(t.data("hasBeenDone",!0),!1)},letDoAgain:function(e){$(e).data("hasBeenDone",!1)},setTextareaCharsCounter:function e(t){var n=t||$("[data-chars-counter]"),o=t?t.parent().find("[data-chars-counter-left]"):$("[data-chars-counter-left]");return n.each(function(e){d(n.eq(e),o.eq(e)),$(this).off("keyup").on("keyup",function(){d(n.eq(e),o.eq(e))})}),e}(),removePlaceholderOnFocus:function e(t){return(t||$("textarea[placeholder], input[placeholder]")).each(function(){var e=$(this);e.data("placeholder",e.attr("placeholder")),e.on("focus",function(){$(this).removeAttr("placeholder")}),e.on("blur",function(){var e=$(this);e.attr("placeholder",e.data("placeholder"))})}),e}(),fullscreen:{isFullScreenActive:function(){return!!document.webkitCurrentFullScreenElement||!!document.msFullscreenElement||!!document.fullscreenElement},enter:function(e){var t=e||document.documentElement;t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()},exit:function(){this.isFullScreenActive()&&(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen())}},uploadBinarySupported:"undefined"!=typeof FormData&&"undefined"!=typeof FileReader&&"undefined"!=typeof Blob&&"undefined"!=typeof Uint8Array,uploadBinary:function(e,t,n,o,i,r){if(!modules.utils.uploadBinarySupported)throw new Error("Binary upload not available in this browser");for(var s=atob(t.split(",")[1]),a=[],c=0;c<s.length;c++)a.push(s.charCodeAt(c));var l=new Blob([new Uint8Array(a)],{type:o}),u=new FormData;u.append(n,l),Object.keys(i).forEach(function(e){u.append(e,i[e])}),$.ajax({url:e,type:"POST",data:u,processData:!1,contentType:!1}).done(function(e){r(e)}).fail(function(e,t,n){r(!1)})},objectSize:function(e){var t,n=0;for(t in e)e.hasOwnProperty(t)&&n++;return n}})})(),!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).io=e()}(function(){return function r(s,a,c){function l(n,e){if(!a[n]){if(!s[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(u)return u(n,!0);var o=new Error("Cannot find module '"+n+"'");throw o.code="MODULE_NOT_FOUND",o}var i=a[n]={exports:{}};s[n][0].call(i.exports,function(e){var t=s[n][1][e];return l(t||e)},i,i.exports,r,s,a,c)}return a[n].exports}for(var u="function"==typeof require&&require,e=0;e<c.length;e++)l(c[e]);return l}({1:[function(e,t,n){t.exports=e("./lib/")},{"./lib/":2}],2:[function(e,t,n){t.exports=e("./socket"),t.exports.parser=e("engine.io-parser")},{"./socket":3,"engine.io-parser":19}],3:[function(t,l,e){!function(o){var n=t("./transports"),e=t("component-emitter"),d=t("debug")("engine.io-client:socket"),i=t("indexof"),r=t("engine.io-parser"),s=t("parseuri"),a=t("parsejson"),c=t("parseqs");function p(e,t){if(!(this instanceof p))return new p(e,t);t=t||{},e&&"object"==typeof e&&(t=e,e=null),e?(e=s(e),t.hostname=e.host,t.secure="https"==e.protocol||"wss"==e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=s(t.host).host),this.secure=null!=t.secure?t.secure:o.location&&"https:"==location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||(o.location?location.hostname:"localhost"),this.port=t.port||(o.location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=c.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=!1!==t.perMessageDeflate&&(t.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=void 0===t.rejectUnauthorized?null:t.rejectUnauthorized;var n="object"==typeof o&&o;n.global===n&&t.extraHeaders&&0<Object.keys(t.extraHeaders).length&&(this.extraHeaders=t.extraHeaders),this.open()}(l.exports=p).priorWebsocketSuccess=!1,e(p.prototype),p.protocol=r.protocol,(p.Socket=p).Transport=t("./transport"),p.transports=t("./transports"),p.parser=t("engine.io-parser"),p.prototype.createTransport=function(e){d('creating transport "%s"',e);var t=(e=>{var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n})(this.query);return t.EIO=r.protocol,t.transport=e,this.id&&(t.sid=this.id),new n[e]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:t,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized,perMessageDeflate:this.perMessageDeflate,extraHeaders:this.extraHeaders})},p.prototype.open=function(){var e,t;if(this.rememberUpgrade&&p.priorWebsocketSuccess&&-1!=this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length)return t=this,void setTimeout(function(){t.emit("error","No transports available")},0);e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},p.prototype.setTransport=function(e){d("setting transport %s",e.name);var t=this;this.transport&&(d("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),(this.transport=e).on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},p.prototype.probe=function(n){d('probing transport "%s"',n);var o=this.createTransport(n,{probe:1}),i=!1,r=this;function e(){var e;r.onlyBinaryUpgrades&&(e=!this.supportsBinary&&r.transport.supportsBinary,i=i||e),i||(d('probe transport "%s" opened',n),o.send([{type:"ping",data:"probe"}]),o.once("packet",function(e){var t;i||("pong"==e.type&&"probe"==e.data?(d('probe transport "%s" pong',n),r.upgrading=!0,r.emit("upgrading",o),o&&(p.priorWebsocketSuccess="websocket"==o.name,d('pausing current transport "%s"',r.transport.name),r.transport.pause(function(){i||"closed"!=r.readyState&&(d("changing transport and sending upgrade packet"),u(),r.setTransport(o),o.send([{type:"upgrade"}]),r.emit("upgrade",o),o=null,r.upgrading=!1,r.flush())}))):(d('probe transport "%s" failed',n),(t=new Error("probe error")).transport=o.name,r.emit("upgradeError",t)))}))}function s(){i||(i=!0,u(),o.close(),o=null)}function t(e){var t=new Error("probe error: "+e);t.transport=o.name,s(),d('probe transport "%s" failed because of error: %s',n,e),r.emit("upgradeError",t)}function a(){t("transport closed")}function c(){t("socket closed")}function l(e){o&&e.name!=o.name&&(d('"%s" works - aborting "%s"',e.name,o.name),s())}function u(){o.removeListener("open",e),o.removeListener("error",t),o.removeListener("close",a),r.removeListener("close",c),r.removeListener("upgrading",l)}p.priorWebsocketSuccess=!1,o.once("open",e),o.once("error",t),o.once("close",a),this.once("close",c),this.once("upgrading",l),o.open()},p.prototype.onOpen=function(){if(d("socket open"),this.readyState="open",p.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){d("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},p.prototype.onPacket=function(e){if("opening"==this.readyState||"open"==this.readyState)switch(d('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(a(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else d('packet received with socket readyState "%s"',this.readyState)},p.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},p.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!=t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},p.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){d("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},p.prototype.ping=function(){var e=this;this.sendPacket("ping",function(){e.emit("ping")})},p.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),(this.prevBufferLen=0)===this.writeBuffer.length?this.emit("drain"):this.flush()},p.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(d("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},p.prototype.write=p.prototype.send=function(e,t,n){return this.sendPacket("message",e,t,n),this},p.prototype.sendPacket=function(e,t,n,o){var i;"function"==typeof t&&(o=t,t=void 0),"function"==typeof n&&(o=n,n=null),"closing"!=this.readyState&&"closed"!=this.readyState&&((n=n||{}).compress=!1!==n.compress,this.emit("packetCreate",i={type:e,data:t,options:n}),this.writeBuffer.push(i),o&&this.once("flush",o),this.flush())},p.prototype.close=function(){var e;function t(){e.onClose("forced close"),d("socket closing - telling transport to close"),e.transport.close()}function n(){e.removeListener("upgrade",n),e.removeListener("upgradeError",n),t()}function o(){e.once("upgrade",n),e.once("upgradeError",n)}return"opening"!=this.readyState&&"open"!=this.readyState||(this.readyState="closing",(e=this).writeBuffer.length?this.once("drain",function(){(this.upgrading?o:t)()}):(this.upgrading?o:t)()),this},p.prototype.onError=function(e){d("socket error %j",e),p.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},p.prototype.onClose=function(e,t){"opening"!=this.readyState&&"open"!=this.readyState&&"closing"!=this.readyState||(d('socket close with reason: "%s"',e),clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)},p.prototype.filterUpgrades=function(e){for(var t=[],n=0,o=e.length;n<o;n++)~i(this.transports,e[n])&&t.push(e[n]);return t}}.call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{"./transport":4,"./transports":5,"component-emitter":15,debug:17,"engine.io-parser":19,indexof:23,parsejson:26,parseqs:27,parseuri:28}],4:[function(e,t,n){var o=e("engine.io-parser");function i(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders}e("component-emitter")((t.exports=i).prototype),i.prototype.onError=function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this},i.prototype.open=function(){return"closed"!=this.readyState&&""!=this.readyState||(this.readyState="opening",this.doOpen()),this},i.prototype.close=function(){return"opening"!=this.readyState&&"open"!=this.readyState||(this.doClose(),this.onClose()),this},i.prototype.send=function(e){if("open"!=this.readyState)throw new Error("Transport not open");this.write(e)},i.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},i.prototype.onData=function(e){var t=o.decodePacket(e,this.socket.binaryType);this.onPacket(t)},i.prototype.onPacket=function(e){this.emit("packet",e)},i.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{"component-emitter":15,"engine.io-parser":19}],5:[function(t,e,n){!function(s){var a=t("xmlhttprequest-ssl"),c=t("./polling-xhr"),l=t("./polling-jsonp"),e=t("./websocket");n.polling=function(e){var t=!1,n=!1,o=!1!==e.jsonp;{var i,r;s.location&&(i="https:"==location.protocol,r=(r=location.port)||(i?443:80),t=e.hostname!=location.hostname||r!=e.port,n=e.secure!=i)}{if(e.xdomain=t,e.xscheme=n,"open"in new a(e)&&!e.forceJSONP)return new c(e);if(o)return new l(e);throw new Error("JSONP disabled")}},n.websocket=e}.call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{"./polling-jsonp":6,"./polling-xhr":7,"./websocket":9,"xmlhttprequest-ssl":10}],6:[function(s,a,e){!function(n){var o,i=s("./polling"),e=s("component-inherit"),l=(a.exports=t,/\n/g),u=/\\n/g;function r(){}function t(e){i.call(this,e),this.query=this.query||{},o||(n.___eio||(n.___eio=[]),o=n.___eio),this.index=o.length;var t=this;o.push(function(e){t.onData(e)}),this.query.j=this.index,n.document&&n.addEventListener&&n.addEventListener("beforeunload",function(){t.script&&(t.script.onerror=r)},!1)}e(t,i),t.prototype.supportsBinary=!1,t.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),i.prototype.doClose.call(this)},t.prototype.doPoll=function(){var t=this,e=document.createElement("script"),n=(this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(e){t.onError("jsonp poll error",e)},document.getElementsByTagName("script")[0]);n?n.parentNode.insertBefore(e,n):(document.head||document.body).appendChild(e),this.script=e,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},t.prototype.doWrite=function(e,t){var n,o,i,r,s=this;function a(){c(),t()}function c(){if(s.iframe)try{s.form.removeChild(s.iframe)}catch(e){s.onError("jsonp polling iframe removal error",e)}try{var e='<iframe src="javascript:0" name="'+s.iframeId+'">';r=document.createElement(e)}catch(e){(r=document.createElement("iframe")).name=s.iframeId,r.src="javascript:0"}r.id=s.iframeId,s.form.appendChild(r),s.iframe=r}this.form||(n=document.createElement("form"),o=document.createElement("textarea"),i=this.iframeId="eio_iframe_"+this.index,n.className="socketio",n.style.position="absolute",n.style.top="-1000px",n.style.left="-1000px",n.target=i,n.method="POST",n.setAttribute("accept-charset","utf-8"),o.name="d",n.appendChild(o),document.body.appendChild(n),this.form=n,this.area=o),this.form.action=this.uri(),c(),e=e.replace(u,"\\\n"),this.area.value=e.replace(l,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==s.iframe.readyState&&a()}:this.iframe.onload=a}}.call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{"./polling":8,"component-inherit":16}],7:[function(u,d,e){!function(i){var r=u("xmlhttprequest-ssl"),o=u("./polling"),e=u("component-emitter"),t=u("component-inherit"),s=u("debug")("engine.io-client:polling-xhr");function n(){}function a(e){var t,n;o.call(this,e),i.location?(t="https:"==location.protocol,n=(n=location.port)||(t?443:80),this.xd=e.hostname!=i.location.hostname||n!=e.port,this.xs=e.secure!=t):this.extraHeaders=e.extraHeaders}function c(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=null!=e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}function l(){for(var e in c.requests)c.requests.hasOwnProperty(e)&&c.requests[e].abort()}d.exports=a,d.exports.Request=c,t(a,o),a.prototype.supportsBinary=!0,a.prototype.request=function(e){return(e=e||{}).uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.extraHeaders=this.extraHeaders,new c(e)},a.prototype.doWrite=function(e,t){var n=this.request({method:"POST",data:e,isBinary:"string"!=typeof e&&void 0!==e}),o=this;n.on("success",t),n.on("error",function(e){o.onError("xhr post error",e)}),this.sendXhr=n},a.prototype.doPoll=function(){s("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},e(c.prototype),c.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR},t=(e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,this.xhr=new r(e)),n=this;try{s("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var o in t.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(o)&&t.setRequestHeader(o,this.extraHeaders[o])}catch(e){}if(this.supportsBinary&&(t.responseType="arraybuffer"),"POST"==this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}"withCredentials"in t&&(t.withCredentials=!0),this.hasXDR()?(t.onload=function(){n.onLoad()},t.onerror=function(){n.onError(t.responseText)}):t.onreadystatechange=function(){4==t.readyState&&(200==t.status||1223==t.status?n.onLoad():setTimeout(function(){n.onError(t.status)},0))},s("xhr data %s",this.data),t.send(this.data)}catch(e){return void setTimeout(function(){n.onError(e)},0)}i.document&&(this.index=c.requestsCount++,c.requests[this.index]=this)},c.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},c.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},c.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},c.prototype.cleanup=function(e){if(null!=this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=n:this.xhr.onreadystatechange=n,e)try{this.xhr.abort()}catch(e){}i.document&&delete c.requests[this.index],this.xhr=null}},c.prototype.onLoad=function(){var t,e;try{try{e=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(e){}if("application/octet-stream"===e)t=this.xhr.response;else if(this.supportsBinary)try{t=String.fromCharCode.apply(null,new Uint8Array(this.xhr.response))}catch(e){for(var n=new Uint8Array(this.xhr.response),o=[],i=0,r=n.length;i<r;i++)o.push(n[i]);t=String.fromCharCode.apply(null,o)}else t=this.xhr.responseText}catch(e){this.onError(e)}null!=t&&this.onData(t)},c.prototype.hasXDR=function(){return void 0!==i.XDomainRequest&&!this.xs&&this.enablesXDR},c.prototype.abort=function(){this.cleanup()},i.document&&(c.requestsCount=0,c.requests={},i.attachEvent?i.attachEvent("onunload",l):i.addEventListener&&i.addEventListener("beforeunload",l,!1))}.call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{"./polling":8,"component-emitter":15,"component-inherit":16,debug:17,"xmlhttprequest-ssl":10}],8:[function(e,t,n){var o=e("../transport"),i=e("parseqs"),r=e("engine.io-parser"),s=e("component-inherit"),a=e("yeast"),c=e("debug")("engine.io-client:polling"),l=(t.exports=u,null!=new(e("xmlhttprequest-ssl"))({xdomain:!1}).responseType);function u(e){var t=e&&e.forceBase64;l&&!t||(this.supportsBinary=!1),o.call(this,e)}s(u,o),u.prototype.name="polling",u.prototype.doOpen=function(){this.poll()},u.prototype.pause=function(e){var t,n=this;function o(){c("paused"),n.readyState="paused",e()}this.readyState="pausing",this.polling||!this.writable?(t=0,this.polling&&(c("we are currently polling - waiting to pause"),t++,this.once("pollComplete",function(){c("pre-pause polling complete"),--t||o()})),this.writable||(c("we are currently writing - waiting to pause"),t++,this.once("drain",function(){c("pre-pause writing complete"),--t||o()}))):o()},u.prototype.poll=function(){c("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},u.prototype.onData=function(e){var o=this;c("polling got data %s",e);r.decodePayload(e,this.socket.binaryType,function(e,t,n){if("opening"==o.readyState&&o.onOpen(),"close"==e.type)return o.onClose(),!1;o.onPacket(e)}),"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():c('ignoring poll - transport state "%s"',this.readyState))},u.prototype.doClose=function(){var e=this;function t(){c("writing close packet"),e.write([{type:"close"}])}"open"==this.readyState?(c("transport open - closing"),t()):(c("transport not open - deferring close"),this.once("open",t))},u.prototype.write=function(e){function t(){n.writable=!0,n.emit("drain")}this.writable=!1;var n=this;r.encodePayload(e,this.supportsBinary,function(e){n.doWrite(e,t)})},u.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(e[this.timestampParam]=a()),this.supportsBinary||e.sid||(e.b64=1),e=i.encode(e),this.port&&("https"==t&&443!=this.port||"http"==t&&80!=this.port)&&(n=":"+this.port),e.length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e}},{"../transport":4,"component-inherit":16,debug:17,"engine.io-parser":19,parseqs:27,"xmlhttprequest-ssl":10,yeast:30}],9:[function(u,d,e){!function(r){var n=u("../transport"),s=u("engine.io-parser"),o=u("parseqs"),e=u("component-inherit"),i=u("yeast"),a=u("debug")("engine.io-client:websocket"),c=r.WebSocket||r.MozWebSocket,l=c;if(!l&&"undefined"==typeof window)try{l=u("ws")}catch(e){}function t(e){e&&e.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,n.call(this,e)}e(d.exports=t,n),t.prototype.name="websocket",t.prototype.supportsBinary=!0,t.prototype.doOpen=function(){var e,t;this.check()&&(e=this.uri(),(t={agent:this.agent,perMessageDeflate:this.perMessageDeflate}).pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(t.headers=this.extraHeaders),this.ws=c?new l(e):new l(e,void 0,t),void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="buffer"):this.ws.binaryType="arraybuffer",this.addEventListeners())},t.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(t.prototype.onData=function(e){var t=this;setTimeout(function(){n.prototype.onData.call(t,e)},0)}),t.prototype.write=function(e){for(var o=this,i=(this.writable=!1,e.length),t=0,n=i;t<n;t++)(n=>{s.encodePacket(n,o.supportsBinary,function(e){var t;c||(t={},n.options&&(t.compress=n.options.compress),o.perMessageDeflate&&("string"==typeof e?r.Buffer.byteLength(e):e.length)<o.perMessageDeflate.threshold&&(t.compress=!1));try{c?o.ws.send(e):o.ws.send(e,t)}catch(e){a("websocket closed before onclose event")}--i||(o.emit("flush"),setTimeout(function(){o.writable=!0,o.emit("drain")},0))})})(e[t])},t.prototype.onClose=function(){n.prototype.onClose.call(this)},t.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},t.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";return this.port&&("wss"==t&&443!=this.port||"ws"==t&&80!=this.port)&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=i()),this.supportsBinary||(e.b64=1),(e=o.encode(e)).length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e},t.prototype.check=function(){return!(!l||"__initialize"in l&&this.name===t.prototype.name)}}.call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{"../transport":4,"component-inherit":16,debug:17,"engine.io-parser":19,parseqs:27,ws:void 0,yeast:30}],10:[function(e,t,n){var i=e("has-cors");t.exports=function(e){var t=e.xdomain,n=e.xscheme,o=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||i))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!n&&o)return new XDomainRequest}catch(e){}if(!t)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}},{"has-cors":22}],11:[function(e,t,n){function s(){}t.exports=function(e,n,o){var i=!1;return o=o||s,0===(r.count=e)?n():r;function r(e,t){if(r.count<=0)throw new Error("after called too many times");--r.count,e?(i=!0,n(e),n=o):0!==r.count||i||n(null,t)}}},{}],12:[function(e,t,n){t.exports=function(e,t,n){var o=e.byteLength;if(t=t||0,n=n||o,e.slice)return e.slice(t,n);if(t<0&&(t+=o),n<0&&(n+=o),o<n&&(n=o),o<=t||n<=t||0===o)return new ArrayBuffer(0);for(var i=new Uint8Array(e),r=new Uint8Array(n-t),s=t,a=0;s<n;s++,a++)r[a]=i[s];return r.buffer}},{}],13:[function(e,t,n){var d;d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n.encode=function(e){for(var t=new Uint8Array(e),n=t.length,o="",i=0;i<n;i+=3)o=(o=(o=(o+=d[t[i]>>2])+d[(3&t[i])<<4|t[i+1]>>4])+d[(15&t[i+1])<<2|t[i+2]>>6])+d[63&t[i+2]];return n%3==2?o=o.substring(0,o.length-1)+"=":n%3==1&&(o=o.substring(0,o.length-2)+"=="),o},n.decode=function(e){for(var t,n,o,i,r=.75*e.length,s=e.length,a=0,c=("="===e[e.length-1]&&(r--,"="===e[e.length-2])&&r--,new ArrayBuffer(r)),l=new Uint8Array(c),u=0;u<s;u+=4)t=d.indexOf(e[u]),n=d.indexOf(e[u+1]),o=d.indexOf(e[u+2]),i=d.indexOf(e[u+3]),l[a++]=t<<2|n>>4,l[a++]=(15&n)<<4|o>>2,l[a++]=(3&o)<<6|63&i;return c}},{}],14:[function(e,c,t){!function(e){var i=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,t=(()=>{try{return 2===new Blob(["hi"]).size}catch(e){return!1}})(),n=t&&(()=>{try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(e){return!1}})(),o=i&&i.prototype.append&&i.prototype.getBlob;function r(e){for(var t=0;t<e.length;t++){var n,o,i=e[t];i.buffer instanceof ArrayBuffer&&(n=i.buffer,i.byteLength!==n.byteLength&&((o=new Uint8Array(i.byteLength)).set(new Uint8Array(n,i.byteOffset,i.byteLength)),n=o.buffer),e[t]=n)}}function s(e,t){t=t||{};var n=new i;r(e);for(var o=0;o<e.length;o++)n.append(e[o]);return t.type?n.getBlob(t.type):n.getBlob()}function a(e,t){return r(e),new Blob(e,t||{})}c.exports=t?n?e.Blob:a:o?s:void 0}.call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{}],15:[function(e,t,n){function o(e){if(e){var t,n=e;for(t in o.prototype)n[t]=o.prototype[t];return n}}(t.exports=o).prototype.on=o.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},o.prototype.once=function(e,t){var n=this;function o(){n.off(e,o),t.apply(this,arguments)}return this._callbacks=this._callbacks||{},o.fn=t,this.on(e,o),this},o.prototype.off=o.prototype.removeListener=o.prototype.removeAllListeners=o.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)this._callbacks={};else{var n=this._callbacks[e];if(n)if(1==arguments.length)delete this._callbacks[e];else for(var o,i=0;i<n.length;i++)if((o=n[i])===t||o.fn===t){n.splice(i,1);break}}return this},o.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n)for(var o=0,i=(n=n.slice(0)).length;o<i;++o)n[o].apply(this,t);return this},o.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},o.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],16:[function(e,t,n){t.exports=function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],17:[function(e,t,r){function n(){var e;try{e=r.storage.debug}catch(e){}return e}(r=t.exports=e("./debug")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},r.formatArgs=function(){var e,t,n,o=arguments,i=this.useColors;return o[0]=(i?"%c":"")+this.namespace+(i?" %c":" ")+o[0]+(i?"%c ":" ")+"+"+r.humanize(this.diff),i&&(e="color: "+this.color,(o=[o[0],e,"color: inherit"].concat(Array.prototype.slice.call(o,1)))[n=t=0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(t++,"%c"===e)&&(n=t)}),o.splice(n,0,e)),o},r.save=function(e){try{null==e?r.storage.removeItem("debug"):r.storage.debug=e}catch(e){}},r.load=n,r.useColors=function(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)},r.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:(()=>{try{return window.localStorage}catch(e){}})(),r.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],r.formatters.j=function(e){return JSON.stringify(e)},r.enable(n())},{"./debug":18}],18:[function(e,t,a){(a=t.exports=function(e){function t(){}function n(){var i=n,e=+new Date,t=e-(c||e),r=(i.diff=t,i.prev=c,i.curr=e,c=e,null==i.useColors&&(i.useColors=a.useColors()),null==i.color&&i.useColors&&(i.color=a.colors[l++%a.colors.length]),Array.prototype.slice.call(arguments)),s=(r[0]=a.coerce(r[0]),"string"!=typeof r[0]&&(r=["%o"].concat(r)),0);r[0]=r[0].replace(/%([a-z%])/g,function(e,t){var n,o;return"%%"!==e&&(s++,"function"==typeof(n=a.formatters[t]))&&(o=r[s],e=n.call(i,o),r.splice(s,1),s--),e}),"function"==typeof a.formatArgs&&(r=a.formatArgs.apply(i,r)),(n.log||a.log||void 0).apply(i,r)}t.enabled=!1,n.enabled=!0;var o=a.enabled(e)?n:t;return o.namespace=e,o}).coerce=function(e){return e instanceof Error?e.stack||e.message:e},a.disable=function(){a.enable("")},a.enable=function(e){a.save(e);for(var t=(e||"").split(/[\s,]+/),n=t.length,o=0;o<n;o++)t[o]&&("-"===(e=t[o].replace(/\*/g,".*?"))[0]?a.skips.push(new RegExp("^"+e.substr(1)+"$")):a.names.push(new RegExp("^"+e+"$")))},a.enabled=function(e){var t,n;for(t=0,n=a.skips.length;t<n;t++)if(a.skips[t].test(e))return!1;for(t=0,n=a.names.length;t<n;t++)if(a.names[t].test(e))return!0;return!1},a.humanize=e("ms"),a.names=[],a.skips=[],a.formatters={};var c,l=0},{ms:25}],19:[function(c,e,N){!function(C){var e=c("./keys"),t=c("has-binary"),h=c("arraybuffer.slice"),i=c("base64-arraybuffer"),s=c("after"),A=c("utf8"),n=navigator.userAgent.match(/Android/i),o=/PhantomJS/i.test(navigator.userAgent),k=n||o,x=(N.protocol=3,N.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6}),r=e(x),f={type:"error",data:"parser error"},T=c("blob");function a(e,t,n){for(var i=new Array(e.length),o=s(e.length,n),r=0;r<e.length;r++)((n,e,o)=>{t(e,function(e,t){i[n]=t,o(e,i)})})(r,e[r],o)}N.encodePacket=function(e,t,n,o){"function"==typeof t&&(o=t,t=!1),"function"==typeof n&&(o=n,n=null);var i,r,s,a,c,l,u,d,p,h,f,m,g=void 0===e.data?void 0:e.data.buffer||e.data;if(C.ArrayBuffer&&g instanceof ArrayBuffer){var y=e,v=o;if(!t)return N.encodeBase64Packet(y,v);var w=y.data,b=new Uint8Array(w),E=new Uint8Array(1+w.byteLength);E[0]=x[y.type];for(var S=0;S<b.length;S++)E[S+1]=b[S];return v(E.buffer)}return T&&g instanceof C.Blob?(i=e,s=o,(r=t)?k?(u=i,p=s,(d=r)?((l=new FileReader).onload=function(){u.data=l.result,N.encodePacket(u,d,!0,p)},l.readAsArrayBuffer(u.data)):N.encodeBase64Packet(u,p)):((a=new Uint8Array(1))[0]=x[i.type],c=new T([a.buffer,i.data]),s(c)):N.encodeBase64Packet(i,s)):g&&g.base64?(h=o,f="b"+N.packets[e.type]+e.data.data,h(f)):(m=x[e.type],void 0!==e.data&&(m+=n?A.encode(String(e.data)):String(e.data)),o(""+m))},N.encodeBase64Packet=function(t,n){var o,i,r="b"+N.packets[t.type];if(T&&t.data instanceof C.Blob)return(o=new FileReader).onload=function(){var e=o.result.split(",")[1];n(r+e)},o.readAsDataURL(t.data);try{i=String.fromCharCode.apply(null,new Uint8Array(t.data))}catch(e){for(var s=new Uint8Array(t.data),a=new Array(s.length),c=0;c<s.length;c++)a[c]=s[c];i=String.fromCharCode.apply(null,a)}return r+=C.btoa(i),n(r)},N.decodePacket=function(e,t,n){if("string"==typeof e||void 0===e){if("b"==e.charAt(0))return N.decodeBase64Packet(e.substr(1),t);if(n)try{e=A.decode(e)}catch(e){return f}var o=e.charAt(0);return Number(o)==o&&r[o]?1<e.length?{type:r[o],data:e.substring(1)}:{type:r[o]}:f}var o=new Uint8Array(e)[0],i=h(e,1);return T&&"blob"===t&&(i=new T([i])),{type:r[o],data:i}},N.decodeBase64Packet=function(e,t){var n,o=r[e.charAt(0)];return C.ArrayBuffer?(n=i.decode(e.substr(1)),{type:o,data:n="blob"===t&&T?new T([n]):n}):{type:o,data:{base64:!0,data:e.substr(1)}}},N.encodePayload=function(e,n,o){"function"==typeof n&&(o=n,n=null);var i=t(e);return n&&i?T&&!k?N.encodePayloadAsBlob(e,o):N.encodePayloadAsArrayBuffer(e,o):e.length?void a(e,function(e,t){N.encodePacket(e,!!i&&n,!0,function(e){t(null,e.length+":"+e)})},function(e,t){return o(t.join(""))}):o("0:")},N.decodePayload=function(e,t,n){if("string"!=typeof e)return N.decodePayloadAsBinary(e,t,n);var o;if("function"==typeof t&&(n=t,t=null),""==e)return n(f,0,1);for(var i,r,s="",a=0,c=e.length;a<c;a++){var l=e.charAt(a);if(":"!=l)s+=l;else{if(""==s||s!=(i=Number(s)))return n(f,0,1);if(s!=(r=e.substr(a+1,i)).length)return n(f,0,1);if(r.length){if(o=N.decodePacket(r,t,!0),f.type==o.type&&f.data==o.data)return n(f,0,1);if(!1===n(o,a+i,c))return}a+=i,s=""}}return""!=s?n(f,0,1):void 0},N.encodePayloadAsArrayBuffer=function(e,o){if(!e.length)return o(new ArrayBuffer(0));a(e,function(e,t){N.encodePacket(e,!0,!0,function(e){return t(null,e)})},function(e,t){var n=t.reduce(function(e,t){var n="string"==typeof t?t.length:t.byteLength;return e+n.toString().length+n+2},0),s=new Uint8Array(n),a=0;return t.forEach(function(e){var t="string"==typeof e,n=e;if(t){for(var o=new Uint8Array(e.length),i=0;i<e.length;i++)o[i]=e.charCodeAt(i);n=o.buffer}s[a++]=t?0:1;for(var r=n.byteLength.toString(),i=0;i<r.length;i++)s[a++]=parseInt(r[i]);s[a++]=255;for(o=new Uint8Array(n),i=0;i<o.length;i++)s[a++]=o[i]}),o(s.buffer)})},N.encodePayloadAsBlob=function(e,n){a(e,function(e,a){N.encodePacket(e,!0,!0,function(e){var t=new Uint8Array(1);if(t[0]=1,"string"==typeof e){for(var n=new Uint8Array(e.length),o=0;o<e.length;o++)n[o]=e.charCodeAt(o);e=n.buffer,t[0]=0}for(var i,r=(e instanceof ArrayBuffer?e.byteLength:e.size).toString(),s=new Uint8Array(r.length+1),o=0;o<r.length;o++)s[o]=parseInt(r[o]);s[r.length]=255,T&&(i=new T([t.buffer,s.buffer,e]),a(null,i))})},function(e,t){return n(new T(t))})},N.decodePayloadAsBinary=function(e,n,o){"function"==typeof n&&(o=n,n=null);for(var t=e,i=[],r=!1;0<t.byteLength;){for(var s=new Uint8Array(t),a=0===s[0],c="",l=1;255!=s[l];l++){if(310<c.length){r=!0;break}c+=s[l]}if(r)return o(f,0,1);var t=h(t,2+c.length),c=parseInt(c),u=h(t,0,c);if(a)try{u=String.fromCharCode.apply(null,new Uint8Array(u))}catch(e){for(var d=new Uint8Array(u),u="",l=0;l<d.length;l++)u+=String.fromCharCode(d[l])}i.push(u),t=h(t,c)}var p=i.length;i.forEach(function(e,t){o(N.decodePacket(e,n,!0),t,p)})}}.call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{"./keys":20,after:11,"arraybuffer.slice":12,"base64-arraybuffer":13,blob:14,"has-binary":21,utf8:29}],20:[function(e,t,n){t.exports=Object.keys||function(e){var t,n=[],o=Object.prototype.hasOwnProperty;for(t in e)o.call(e,t)&&n.push(t);return n}},{}],21:[function(e,t,n){!function(i){var r=e("isarray");t.exports=function(e){return function e(t){if(t){if(i.Buffer&&i.Buffer.isBuffer(t)||i.ArrayBuffer&&t instanceof ArrayBuffer||i.Blob&&t instanceof Blob||i.File&&t instanceof File)return!0;if(r(t)){for(var n=0;n<t.length;n++)if(e(t[n]))return!0}else if(t&&"object"==typeof t)for(var o in t=t.toJSON?t.toJSON():t)if(Object.prototype.hasOwnProperty.call(t,o)&&e(t[o]))return!0}return!1}(e)}}.call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{isarray:24}],22:[function(e,t,n){try{t.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){t.exports=!1}},{}],23:[function(e,t,n){var o=[].indexOf;t.exports=function(e,t){if(o)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}},{}],24:[function(e,t,n){t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}],25:[function(e,t,n){var a=36e5,c=864e5;function l(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}t.exports=function(e,t){if(t=t||{},"string"==typeof e){var n=e;if(!(1e4<(n=""+n).length)){var o=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(n);if(o){var i=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*i;case"days":case"day":case"d":return i*c;case"hours":case"hour":case"hrs":case"hr":case"h":return i*a;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*i;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*i;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i}}}}else{return t.long?l(s=e,c,"day")||l(s,a,"hour")||l(s,6e4,"minute")||l(s,1e3,"second")||s+" ms":c<=(r=e)?Math.round(r/c)+"d":a<=r?Math.round(r/a)+"h":6e4<=r?Math.round(r/6e4)+"m":1e3<=r?Math.round(r/1e3)+"s":r+"ms";var r,s}}},{}],26:[function(e,c,t){!function(t){var n=/^[\],:{}\s]*$/,o=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,i=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,r=/(?:^|:|,)(?:\s*\[)+/g,s=/^\s+/,a=/\s+$/;c.exports=function(e){return"string"==typeof e&&e?(e=e.replace(s,"").replace(a,""),t.JSON&&JSON.parse?JSON.parse(e):n.test(e.replace(o,"@").replace(i,"]").replace(r,""))?new Function("return "+e)():void 0):null}}.call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{}],27:[function(e,t,n){n.encode=function(e){var t,n="";for(t in e)e.hasOwnProperty(t)&&(n.length&&(n+="&"),n+=encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return n},n.decode=function(e){for(var t={},n=e.split("&"),o=0,i=n.length;o<i;o++){var r=n[o].split("=");t[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return t}},{}],28:[function(e,t,n){var a=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,c=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(e){for(var t=e,n=e.indexOf("["),o=e.indexOf("]"),i=(-1!=n&&-1!=o&&(e=e.substring(0,n)+e.substring(n,o).replace(/:/g,";")+e.substring(o,e.length)),a.exec(e||"")),r={},s=14;s--;)r[c[s]]=i[s]||"";return-1!=n&&-1!=o&&(r.source=t,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0),r}},{}],29:[function(e,g,y){!function(e){var c,l,u,t=this,n="object"==typeof y&&y,o="object"==typeof g&&g&&g.exports==n&&g,i="object"==typeof e&&e,d=(i.global!==i&&i.window!==i||(t=i),String.fromCharCode);function p(e){for(var t,n,o=[],i=0,r=e.length;i<r;)55296<=(t=e.charCodeAt(i++))&&t<=56319&&i<r?56320==(64512&(n=e.charCodeAt(i++)))?o.push(((1023&t)<<10)+(1023&n)+65536):(o.push(t),i--):o.push(t);return o}function h(e){if(55296<=e&&e<=57343)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value")}function f(e,t){return d(e>>t&63|128)}function m(){if(l<=u)throw Error("Invalid byte index");var e=255&c[u];if(u++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}var r={version:"2.0.0",encode:function(e){for(var t,n,o,i=p(e),r=i.length,s=-1,a="";++s<r;)t=i[s],a+=(o=void 0,0==(4294967168&(n=t))?d(n):(o="",0==(4294965248&n)?o=d(n>>6&31|192):0==(4294901760&n)?(h(n),o=d(n>>12&15|224),o+=f(n,6)):0==(4292870144&n)&&(o=d(n>>18&7|240),o=(o+=f(n,12))+f(n,6)),o+d(63&n|128)));return a},decode:function(e){c=p(e),l=c.length,u=0;for(var t,n=[];!1!==(t=(()=>{var e,t;if(l<u)throw Error("Invalid byte index");if(u==l)return!1;if(e=255&c[u],u++,0==(128&e))return e;if(192==(224&e)){if(128<=(t=(31&e)<<6|m()))return t;throw Error("Invalid continuation byte")}if(224==(240&e)){if(2048<=(t=(15&e)<<12|m()<<6|m()))return h(t),t;throw Error("Invalid continuation byte")}if(240==(248&e)&&65536<=(t=(15&e)<<18|m()<<12|m()<<6|m())&&t<=1114111)return t;throw Error("Invalid UTF-8 detected")})());)n.push(t);for(var o,i=n,r=i.length,s=-1,a="";++s<r;)65535<(o=i[s])&&(a+=d((o-=65536)>>>10&1023|55296),o=56320|1023&o),a+=d(o);return a}};if(n&&!n.nodeType)if(o)o.exports=r;else{var s,a={}.hasOwnProperty;for(s in r)a.call(r,s)&&(n[s]=r[s])}else t.utf8=r}.call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{}],30:[function(e,t,n){var o,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),r=64,s={},a=0,c=0;function l(e){for(var t="";t=i[e%r]+t,0<(e=Math.floor(e/r)););return t}function u(){var e=l(+new Date);return e!==o?(a=0,o=e):e+"."+l(a++)}for(;c<r;c++)s[i[c]]=c;u.encode=l,u.decode=function(e){var t=0;for(c=0;c<e.length;c++)t=t*r+s[e.charAt(c)];return t},t.exports=u},{}],31:[function(e,t,n){var a=e("./url"),o=e("socket.io-parser"),c=e("./manager"),l=e("debug")("socket.io-client"),u=(t.exports=n=i,n.managers={});function i(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n=a(e),o=n.source,i=n.id,r=u[i]&&n.path in u[i].nsps,s=t.forceNew||t["force new connection"]||!1===t.multiplex||r?(l("ignoring socket cache for %s",o),c(o,t)):(u[i]||(l("new io instance for %s",o),u[i]=c(o,t)),u[i]);return s.socket(n.path)}n.protocol=o.protocol,n.connect=i,n.Manager=e("./manager"),n.Socket=e("./socket")},{"./manager":32,"./socket":34,"./url":35,debug:39,"socket.io-parser":47}],32:[function(e,t,n){var a=e("engine.io-client"),i=e("./socket"),o=e("component-emitter"),r=e("socket.io-parser"),c=e("./on"),s=e("component-bind"),l=e("debug")("socket.io-client:manager"),u=e("indexof"),d=e("backo2"),p=Object.prototype.hasOwnProperty;function h(e,t){if(!(this instanceof h))return new h(e,t);e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new d({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[],this.encoder=new r.Encoder,this.decoder=new r.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}(t.exports=h).prototype.emitAll=function(){for(var e in this.emit.apply(this,arguments),this.nsps)p.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},h.prototype.updateSocketIds=function(){for(var e in this.nsps)p.call(this.nsps,e)&&(this.nsps[e].id=this.engine.id)},o(h.prototype),h.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},h.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},h.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},h.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},h.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},h.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},h.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},h.prototype.open=h.prototype.connect=function(n){var e,o,t,i,r,s;return l("readyState %s",this.readyState),~this.readyState.indexOf("open")||(l("opening %s",this.uri),this.engine=a(this.uri,this.opts),e=this.engine,(o=this).readyState="opening",this.skipReconnect=!1,t=c(e,"open",function(){o.onopen(),n&&n()}),i=c(e,"error",function(e){var t;l("connect_error"),o.cleanup(),o.readyState="closed",o.emitAll("connect_error",e),n?((t=new Error("Connection error")).data=e,n(t)):o.maybeReconnectOnOpen()}),!1!==this._timeout&&(r=this._timeout,l("connect attempt will timeout after %d",r),s=setTimeout(function(){l("connect attempt timed out after %d",r),t.destroy(),e.close(),e.emit("error","timeout"),o.emitAll("connect_timeout",r)},r),this.subs.push({destroy:function(){clearTimeout(s)}})),this.subs.push(t),this.subs.push(i)),this},h.prototype.onopen=function(){l("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(c(e,"data",s(this,"ondata"))),this.subs.push(c(e,"ping",s(this,"onping"))),this.subs.push(c(e,"pong",s(this,"onpong"))),this.subs.push(c(e,"error",s(this,"onerror"))),this.subs.push(c(e,"close",s(this,"onclose"))),this.subs.push(c(this.decoder,"decoded",s(this,"ondecoded")))},h.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},h.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},h.prototype.ondata=function(e){this.decoder.add(e)},h.prototype.ondecoded=function(e){this.emit("packet",e)},h.prototype.onerror=function(e){l("error",e),this.emitAll("error",e)},h.prototype.socket=function(e){var t,n=this.nsps[e];function o(){~u(t.connecting,n)||t.connecting.push(n)}return n||(n=new i(this,e),this.nsps[e]=n,t=this,n.on("connecting",o),n.on("connect",function(){n.id=t.engine.id}),this.autoConnect&&o()),n},h.prototype.destroy=function(e){var t=u(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},h.prototype.packet=function(n){l("writing packet %j",n);var o=this;o.encoding?o.packetBuffer.push(n):(o.encoding=!0,this.encoder.encode(n,function(e){for(var t=0;t<e.length;t++)o.engine.write(e[t],n.options);o.encoding=!1,o.processPacketQueue()}))},h.prototype.processPacketQueue=function(){var e;0<this.packetBuffer.length&&!this.encoding&&(e=this.packetBuffer.shift(),this.packet(e))},h.prototype.cleanup=function(){var e;for(l("cleanup");e=this.subs.shift();)e.destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},h.prototype.close=h.prototype.disconnect=function(){l("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"==this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},h.prototype.onclose=function(e){l("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},h.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e,t,n=this;this.backoff.attempts>=this._reconnectionAttempts?(l("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1):(e=this.backoff.duration(),l("will wait %dms before reconnect attempt",e),this.reconnecting=!0,t=setTimeout(function(){n.skipReconnect||(l("attempting reconnect"),n.emitAll("reconnect_attempt",n.backoff.attempts),n.emitAll("reconnecting",n.backoff.attempts),n.skipReconnect)||n.open(function(e){e?(l("reconnect attempt error"),n.reconnecting=!1,n.reconnect(),n.emitAll("reconnect_error",e.data)):(l("reconnect success"),n.onreconnect())})},e),this.subs.push({destroy:function(){clearTimeout(t)}}))},h.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},{"./on":33,"./socket":34,backo2:36,"component-bind":37,"component-emitter":38,debug:39,"engine.io-client":1,indexof:42,"socket.io-parser":47}],33:[function(e,t,n){t.exports=function(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}}},{}],34:[function(e,t,n){var r=e("socket.io-parser"),o=e("component-emitter"),s=e("to-array"),i=e("./on"),a=e("component-bind"),c=e("debug")("socket.io-client:socket"),l=e("has-binary"),u=(t.exports=p,{connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1}),d=o.prototype.emit;function p(e,t){this.io=e,this.nsp=t,(this.json=this).ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.io.autoConnect&&this.open()}o(p.prototype),p.prototype.subEvents=function(){var e;this.subs||(e=this.io,this.subs=[i(e,"open",a(this,"onopen")),i(e,"packet",a(this,"onpacket")),i(e,"close",a(this,"onclose"))])},p.prototype.open=p.prototype.connect=function(){return this.connected||(this.subEvents(),this.io.open(),"open"==this.io.readyState&&this.onopen(),this.emit("connecting")),this},p.prototype.send=function(){var e=s(arguments);return e.unshift("message"),this.emit.apply(this,e),this},p.prototype.emit=function(e){var t,n,o;return u.hasOwnProperty(e)?d.apply(this,arguments):(t=s(arguments),n=r.EVENT,(o={type:n=l(t)?r.BINARY_EVENT:n,data:t,options:{}}).options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(c("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),o.id=this.ids++),this.connected?this.packet(o):this.sendBuffer.push(o),delete this.flags),this},p.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},p.prototype.onopen=function(){c("transport is open - connecting"),"/"!=this.nsp&&this.packet({type:r.CONNECT})},p.prototype.onclose=function(e){c("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},p.prototype.onpacket=function(e){if(e.nsp==this.nsp)switch(e.type){case r.CONNECT:this.onconnect();break;case r.EVENT:case r.BINARY_EVENT:this.onevent(e);break;case r.ACK:case r.BINARY_ACK:this.onack(e);break;case r.DISCONNECT:this.ondisconnect();break;case r.ERROR:this.emit("error",e.data)}},p.prototype.onevent=function(e){var t=e.data||[];c("emitting event %j",t),null!=e.id&&(c("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?d.apply(this,t):this.receiveBuffer.push(t)},p.prototype.ack=function(n){var o=this,i=!1;return function(){var e,t;i||(i=!0,e=s(arguments),c("sending ack %j",e),t=l(e)?r.BINARY_ACK:r.ACK,o.packet({type:t,id:n,data:e}))}},p.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(c("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):c("bad ack %s",e.id)},p.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},p.prototype.emitBuffered=function(){for(var e=0;e<this.receiveBuffer.length;e++)d.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},p.prototype.ondisconnect=function(){c("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},p.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},p.prototype.close=p.prototype.disconnect=function(){return this.connected&&(c("performing disconnect (%s)",this.nsp),this.packet({type:r.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},p.prototype.compress=function(e){return this.flags=this.flags||{},this.flags.compress=e,this}},{"./on":33,"component-bind":37,"component-emitter":38,debug:39,"has-binary":41,"socket.io-parser":47,"to-array":51}],35:[function(e,t,n){!function(i){var r=e("parseuri"),s=e("debug")("socket.io-client:url");t.exports=function(e,t){var n=e,t=t||i.location;null==e&&(e=t.protocol+"//"+t.host);"string"==typeof e&&("/"==e.charAt(0)&&(e="/"==e.charAt(1)?t.protocol+e:t.host+e),/^(https?|wss?):\/\//.test(e)||(s("protocol-less url %s",e),e=void 0!==t?t.protocol+"//"+e:"https://"+e),s("parse %s",e),n=r(e));n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443"));n.path=n.path||"/";var o=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+o+":"+n.port,n.href=n.protocol+"://"+o+(t&&t.port==n.port?"":":"+n.port),n}}.call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{debug:39,parseuri:45}],36:[function(e,t,n){function o(e){this.ms=(e=e||{}).min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=0<e.jitter&&e.jitter<=1?e.jitter:0,this.attempts=0}(t.exports=o).prototype.duration=function(){var e,t,n=this.ms*Math.pow(this.factor,this.attempts++);return this.jitter&&(e=Math.random(),t=Math.floor(e*this.jitter*n),n=0==(1&Math.floor(10*e))?n-t:n+t),0|Math.min(n,this.max)},o.prototype.reset=function(){this.attempts=0},o.prototype.setMin=function(e){this.ms=e},o.prototype.setMax=function(e){this.max=e},o.prototype.setJitter=function(e){this.jitter=e}},{}],37:[function(e,t,n){var o=[].slice;t.exports=function(e,t){if("function"!=typeof(t="string"==typeof t?e[t]:t))throw new Error("bind() requires a function");var n=o.call(arguments,2);return function(){return t.apply(e,n.concat(o.call(arguments)))}}},{}],38:[function(e,t,n){function o(e){if(e){var t,n=e;for(t in o.prototype)n[t]=o.prototype[t];return n}}(t.exports=o).prototype.on=o.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},o.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},o.prototype.off=o.prototype.removeListener=o.prototype.removeAllListeners=o.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)this._callbacks={};else{var n=this._callbacks["$"+e];if(n)if(1==arguments.length)delete this._callbacks["$"+e];else for(var o,i=0;i<n.length;i++)if((o=n[i])===t||o.fn===t){n.splice(i,1);break}}return this},o.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n)for(var o=0,i=(n=n.slice(0)).length;o<i;++o)n[o].apply(this,t);return this},o.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},o.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],39:[function(e,t,n){arguments[4][17][0].apply(n,arguments)},{"./debug":40,dup:17}],40:[function(e,t,n){arguments[4][18][0].apply(n,arguments)},{dup:18,ms:44}],41:[function(e,t,n){!function(i){var r=e("isarray");t.exports=function(e){return function e(t){if(t){if(i.Buffer&&i.Buffer.isBuffer&&i.Buffer.isBuffer(t)||i.ArrayBuffer&&t instanceof ArrayBuffer||i.Blob&&t instanceof Blob||i.File&&t instanceof File)return!0;if(r(t)){for(var n=0;n<t.length;n++)if(e(t[n]))return!0}else if(t&&"object"==typeof t)for(var o in t=t.toJSON&&"function"==typeof t.toJSON?t.toJSON():t)if(Object.prototype.hasOwnProperty.call(t,o)&&e(t[o]))return!0}return!1}(e)}}.call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{isarray:43}],42:[function(e,t,n){arguments[4][23][0].apply(n,arguments)},{dup:23}],43:[function(e,t,n){arguments[4][24][0].apply(n,arguments)},{dup:24}],44:[function(e,t,n){arguments[4][25][0].apply(n,arguments)},{dup:25}],45:[function(e,t,n){arguments[4][28][0].apply(n,arguments)},{dup:28}],46:[function(e,t,n){!function(u){var d=e("isarray"),p=e("./is-buffer");n.deconstructPacket=function(e){var s=[],t=e.data;var n=e;return n.data=function e(t){if(!t)return t;var n;if(p(t))return n={_placeholder:!0,num:s.length},s.push(t),n;if(d(t))for(var o=new Array(t.length),i=0;i<t.length;i++)o[i]=e(t[i]);else{if("object"!=typeof t||t instanceof Date)return t;var r,o={};for(r in t)o[r]=e(t[r])}return o}(t),n.attachments=s.length,{packet:n,buffers:s}},n.reconstructPacket=function(e,i){return e.data=function e(t){if(t&&t._placeholder)return i[t.num];if(d(t))for(var n=0;n<t.length;n++)t[n]=e(t[n]);else if(t&&"object"==typeof t)for(var o in t)t[o]=e(t[o]);return t}(e.data),e.attachments=void 0,e},n.removeBlobs=function(e,a){var c=0,l=e;!function e(t,n,o){if(t)if(u.Blob&&t instanceof Blob||u.File&&t instanceof File){c++;var i=new FileReader;i.onload=function(){o?o[n]=this.result:l=this.result,--c||a(l)},i.readAsArrayBuffer(t)}else if(d(t))for(var r=0;r<t.length;r++)e(t[r],r,t);else if(t&&"object"==typeof t&&!p(t))for(var s in t)e(t[s],s,t)}(l),c||a(l)}}.call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{"./is-buffer":48,isarray:43}],47:[function(e,t,s){var a=e("debug")("socket.io-parser"),c=e("json3"),n=(e("isarray"),e("component-emitter")),r=e("./binary"),o=e("./is-buffer");function i(){}function l(e){var t="",n=!1;return t+=e.type,s.BINARY_EVENT!=e.type&&s.BINARY_ACK!=e.type||(t=t+e.attachments+"-"),e.nsp&&"/"!=e.nsp&&(n=!0,t+=e.nsp),null!=e.id&&(n&&(t+=",",n=!1),t+=e.id),null!=e.data&&(n&&(t+=","),t+=c.stringify(e.data)),a("encoded %j as %s",e,t),t}function u(){this.reconstructor=null}function d(e){this.reconPack=e,this.buffers=[]}function p(){return{type:s.ERROR,data:"parser error"}}s.protocol=4,s.types=["CONNECT","DISCONNECT","EVENT","BINARY_EVENT","ACK","BINARY_ACK","ERROR"],s.CONNECT=0,s.DISCONNECT=1,s.EVENT=2,s.ACK=3,s.ERROR=4,s.BINARY_EVENT=5,s.BINARY_ACK=6,s.Encoder=i,s.Decoder=u,i.prototype.encode=function(e,t){var i;a("encoding packet %j",e),s.BINARY_EVENT==e.type||s.BINARY_ACK==e.type?(i=t,r.removeBlobs(e,function(e){var t=r.deconstructPacket(e),n=l(t.packet),o=t.buffers;o.unshift(n),i(o)})):t([l(e)])},n(u.prototype),u.prototype.add=function(e){var t;if("string"==typeof e)t=(e=>{var t={},n=0;if(t.type=Number(e.charAt(0)),null==s.types[t.type])return p();if(s.BINARY_EVENT==t.type||s.BINARY_ACK==t.type){for(var o="";"-"!=e.charAt(++n)&&(o+=e.charAt(n),n!=e.length););if(o!=Number(o)||"-"!=e.charAt(n))throw new Error("Illegal attachments");t.attachments=Number(o)}if("/"==e.charAt(n+1))for(t.nsp="";++n;){if(","==(i=e.charAt(n)))break;if(t.nsp+=i,n==e.length)break}else t.nsp="/";var i,r=e.charAt(n+1);if(""!==r&&Number(r)==r){for(t.id="";++n;){if(null==(i=e.charAt(n))||Number(i)!=i){--n;break}if(t.id+=e.charAt(n),n==e.length)break}t.id=Number(t.id)}if(e.charAt(++n))try{t.data=c.parse(e.substr(n))}catch(e){return p()}return a("decoded %s as %j",e,t),t})(e),(s.BINARY_EVENT!=t.type&&s.BINARY_ACK!=t.type||(this.reconstructor=new d(t),0===this.reconstructor.reconPack.attachments))&&this.emit("decoded",t);else{if(!o(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",t))}},u.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},d.prototype.takeBinaryData=function(e){var t;return this.buffers.push(e),this.buffers.length==this.reconPack.attachments?(t=r.reconstructPacket(this.reconPack,this.buffers),this.finishedReconstruction(),t):null},d.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},{"./binary":46,"./is-buffer":48,"component-emitter":49,debug:39,isarray:43,json3:50}],48:[function(e,n,t){!function(t){n.exports=function(e){return t.Buffer&&t.Buffer.isBuffer(e)||t.ArrayBuffer&&e instanceof ArrayBuffer}}.call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{}],49:[function(e,t,n){arguments[4][15][0].apply(n,arguments)},{dup:15}],50:[function(e,a,c){!function(s){!function(){var e,t,n,o,U={function:!0,object:!0},i=U[typeof c]&&c&&!c.nodeType&&c,j=U[typeof window]&&window||this,r=i&&U[typeof a]&&a&&!a.nodeType&&"object"==typeof s&&s;function q(e,c){e=e||j.Object(),c=c||j.Object();var C,A,k,u,x,T,N,a,O,n,_,l,o,I,d,R,$,p,h,f,m,g,i,r,s,y,v=e.Number||j.Number,w=e.String||j.String,M=e.Object||j.Object,b=e.Date||j.Date,P=e.SyntaxError||j.SyntaxError,L=e.TypeError||j.TypeError,F=e.Math||j.Math,t=e.JSON||j.JSON,E=("object"==typeof t&&t&&(c.stringify=t.stringify,c.parse=t.parse),M.prototype),B=E.toString,S=new b(-0xc782b5b800cec);try{S=-109252==S.getUTCFullYear()&&0===S.getUTCMonth()&&1===S.getUTCDate()&&10==S.getUTCHours()&&37==S.getUTCMinutes()&&6==S.getUTCSeconds()&&708==S.getUTCMilliseconds()}catch(e){}function D(e){if(D[e]!==k)return D[e];var t;if("bug-string-char-index"==e)t="a"!="a"[0];else if("json"==e)t=D("json-stringify")&&D("json-parse");else{var n='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var o=c.stringify,i="function"==typeof o&&S;if(i){(s=function(){return 1}).toJSON=s;try{i="0"===o(0)&&"0"===o(new v)&&'""'==o(new w)&&o(B)===k&&o(k)===k&&o()===k&&"1"===o(s)&&"[1]"==o([s])&&"[null]"==o([k])&&"null"==o(null)&&"[null,null,null]"==o([k,B,null])&&o({a:[s,!0,!1,null,"\0\b\n\f\r\t"]})==n&&"1"===o(null,s)&&"[\n 1,\n 2\n]"==o([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==o(new b(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==o(new b(864e13))&&'"-000001-01-01T00:00:00.000Z"'==o(new b(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==o(new b(-1))}catch(e){i=!1}}t=i}if("json-parse"==e){var r=c.parse;if("function"==typeof r)try{if(0===r("0")&&!r(!1)){var s,a=5==(s=r(n)).a.length&&1===s.a[0];if(a){try{a=!r('"\t"')}catch(e){}if(a)try{a=1!==r("01")}catch(e){}if(a)try{a=1!==r("1.")}catch(e){}}}}catch(e){a=!1}t=a}}return D[e]=!!t}return D("json")||(u="[object Function]",x="[object Number]",T="[object String]",N="[object Array]",a=D("bug-string-char-index"),S||(O=F.floor,n=[0,31,59,90,120,151,181,212,243,273,304,334],_=function(e,t){return n[t]+365*(e-1970)+O((e-1969+(t=+(1<t)))/4)-O((e-1901+t)/100)+O((e-1601+t)/400)}),C=(C=E.hasOwnProperty)||function(e){var n,t={__proto__:null};return t.__proto__={toString:1},C=t.toString!=B?function(e){var t=this.__proto__,n=e in(this.__proto__=null,this);return this.__proto__=t,n}:(n=t.constructor,function(e){var t=(this.constructor||n).prototype;return e in this&&!(e in t&&this[e]===t[e])}),t=null,C.call(this,e)},A=function(e,t){var n,s,o,i=0;for(o in(n=function(){this.valueOf=0}).prototype.valueOf=0,s=new n)C.call(s,o)&&i++;return s=null,(A=i?2==i?function(e,t){var n,o={},i=B.call(e)==u;for(n in e)i&&"prototype"==n||C.call(o,n)||(o[n]=1,!C.call(e,n))||t(n)}:function(e,t){var n,o,i=B.call(e)==u;for(n in e)i&&"prototype"==n||!C.call(e,n)||(o="constructor"===n)||t(n);(o||C.call(e,n="constructor"))&&t(n)}:(s=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],function(e,t){var n,o,i=B.call(e)==u,r=!i&&"function"!=typeof e.constructor&&U[typeof e.hasOwnProperty]&&e.hasOwnProperty||C;for(n in e)i&&"prototype"==n||!r.call(e,n)||t(n);for(o=s.length;n=s[--o];r.call(e,n)&&t(n));}))(e,t)},D("json-stringify")||(l={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},o="000000",I=function(e,t){return(o+(t||0)).slice(-e)},d="\\u00",R=function(e){for(var t='"',n=0,o=e.length,i=!a||10<o,r=i&&(a?e.split(""):e);n<o;n++){var s=e.charCodeAt(n);switch(s){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=l[s];break;default:s<32?t+=d+I(2,s.toString(16)):t+=i?r[n]:e.charAt(n)}}return t+'"'},$=function(e,t,n,o,i,r,s){var a,c,l,u,d,p,h,f,m,g,y,v,w,b,E,S;try{a=t[e]}catch(e){}if("object"==typeof a&&a)if("[object Date]"!=(c=B.call(a))||C.call(a,"toJSON"))"function"==typeof a.toJSON&&(c!=x&&c!=T&&c!=N||C.call(a,"toJSON"))&&(a=a.toJSON(e));else if(-1/0<a&&a<1/0){if(_){for(d=O(a/864e5),l=O(d/365.2425)+1970-1;_(l+1,0)<=d;l++);for(u=O((d-_(l,0))/30.42);_(l,u+1)<=d;u++);d=1+d-_(l,u),h=O((p=(a%864e5+864e5)%864e5)/36e5)%24,f=O(p/6e4)%60,m=O(p/1e3)%60,g=p%1e3}else l=a.getUTCFullYear(),u=a.getUTCMonth(),d=a.getUTCDate(),h=a.getUTCHours(),f=a.getUTCMinutes(),m=a.getUTCSeconds(),g=a.getUTCMilliseconds();a=(l<=0||1e4<=l?(l<0?"-":"+")+I(6,l<0?-l:l):I(4,l))+"-"+I(2,u+1)+"-"+I(2,d)+"T"+I(2,h)+":"+I(2,f)+":"+I(2,m)+"."+I(3,g)+"Z"}else a=null;if(null===(a=n?n.call(t,e,a):a))return"null";if("[object Boolean]"==(c=B.call(a)))return""+a;if(c==x)return-1/0<a&&a<1/0?""+a:"null";if(c==T)return R(""+a);if("object"==typeof a){for(b=s.length;b--;)if(s[b]===a)throw L();if(s.push(a),y=[],E=r,r+=i,c==N){for(w=0,b=a.length;w<b;w++)v=$(w,a,n,o,i,r,s),y.push(v===k?"null":v);S=y.length?i?"[\n"+r+y.join(",\n"+r)+"\n"+E+"]":"["+y.join(",")+"]":"[]"}else A(o||a,function(e){var t=$(e,a,n,o,i,r,s);t!==k&&y.push(R(e)+":"+(i?" ":"")+t)}),S=y.length?i?"{\n"+r+y.join(",\n"+r)+"\n"+E+"}":"{"+y.join(",")+"}":"{}";return s.pop(),S}},c.stringify=function(e,t,n){var o,i,r;if(U[typeof t]&&t)if((r=B.call(t))==u)i=t;else if(r==N)for(var s,a={},c=0,l=t.length;c<l;s=t[c++],(r=B.call(s))!=T&&r!=x||(a[s]=1));if(n)if((r=B.call(n))==x){if(0<(n-=n%1))for(o="",10<n&&(n=10);o.length<n;o+=" ");}else r==T&&(o=n.length<=10?n:n.slice(0,10));return $("",((s={})[""]=e,s),i,a,o,"",[])}),D("json-parse"))||(p=w.fromCharCode,h={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},g=function(){throw f=m=null,P()},i=function(){for(var e,t,n,o,i,r=m,s=r.length;f<s;)switch(i=r.charCodeAt(f)){case 9:case 10:case 13:case 32:f++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=a?r.charAt(f):r[f],f++,e;case 34:for(e="@",f++;f<s;)if((i=r.charCodeAt(f))<32)g();else if(92==i)switch(i=r.charCodeAt(++f)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=h[i],f++;break;case 117:for(t=++f,n=f+4;f<n;f++)48<=(i=r.charCodeAt(f))&&i<=57||97<=i&&i<=102||65<=i&&i<=70||g();e+=p("0x"+r.slice(t,f));break;default:g()}else{if(34==i)break;for(i=r.charCodeAt(f),t=f;32<=i&&92!=i&&34!=i;)i=r.charCodeAt(++f);e+=r.slice(t,f)}if(34==r.charCodeAt(f))return f++,e;g();default:if(t=f,45==i&&(o=!0,i=r.charCodeAt(++f)),48<=i&&i<=57){for(48==i&&48<=(i=r.charCodeAt(f+1))&&i<=57&&g(),o=!1;f<s&&48<=(i=r.charCodeAt(f))&&i<=57;f++);if(46==r.charCodeAt(f)){for(n=++f;n<s&&48<=(i=r.charCodeAt(n))&&i<=57;n++);n==f&&g(),f=n}if(101==(i=r.charCodeAt(f))||69==i){for(43!=(i=r.charCodeAt(++f))&&45!=i||f++,n=f;n<s&&48<=(i=r.charCodeAt(n))&&i<=57;n++);n==f&&g(),f=n}return+r.slice(t,f)}if(o&&g(),"true"==r.slice(f,f+4))return f+=4,!0;if("false"==r.slice(f,f+5))return f+=5,!1;if("null"==r.slice(f,f+4))return f+=4,null;g()}return"$"},r=function(e){var t,n;if("$"==e&&g(),"string"==typeof e){if("@"==(a?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];"]"!=(e=i());n=n||!0)!n||","==e&&"]"!=(e=i())||g(),","==e&&g(),t.push(r(e));return t}if("{"==e){for(t={};"}"!=(e=i());n=n||!0)!n||","==e&&"}"!=(e=i())||g(),","!=e&&"string"==typeof e&&"@"==(a?e.charAt(0):e[0])&&":"==i()||g(),t[e.slice(1)]=r(i());return t}g()}return e},s=function(e,t,n){var o=y(e,t,n);o===k?delete e[t]:e[t]=o},y=function(e,t,n){var o,i=e[t];if("object"==typeof i&&i)if(B.call(i)==N)for(o=i.length;o--;)s(i,o,n);else A(i,function(e){s(i,e,n)});return n.call(e,t,i)},c.parse=function(e,t){var n,o;return f=0,m=""+e,n=r(i()),"$"!=i()&&g(),f=m=null,t&&B.call(t)==u?y(((o={})[""]=n,o),"",t):n}),c.runInContext=q,c}!r||r.global!==r&&r.window!==r&&r.self!==r||(j=r),i?q(j,i):(e=j.JSON,t=j.JSON3,n=!1,o=q(j,j.JSON3={noConflict:function(){return n||(n=!0,j.JSON=e,j.JSON3=t,e=t=null),o}}),j.JSON={parse:o.parse,stringify:o.stringify})}.call(this)}.call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{}],51:[function(e,t,n){t.exports=function(e,t){for(var n=[],o=(t=t||0)||0;o<e.length;o++)n[o-t]=e[o];return n}},{}]},{},[31])(31)}),modules||{}),modules=((()=>{function e(e){this.options=Object.assign({},n,e),this.engineOptions=Object.assign({},n,e).engine,this.engine=io,modules.utils.makeObservable(this,Object.keys(t))}var t={connect:"connect",disconnect:"disconnect",reconnect:"reconnect",conversationRead:"conversationRead",userMessage:"userMessage",systemMessage:"systemMessage",communications:"communications",replyMetricsAgencyRate:"replyMetricsAgencyRate",replyMetricsUserRate:"replyMetricsUserRate",propertiesExcelEvent:"propertiesExcelEvent",prospectionsExcelEvent:"prospectionsExcelEvent",duplicatesEvent:"duplicatesEvent"},n={socketURL:"",authCookieName:"COOKIE_NAME",engine:{reconnection:!0,reconnectionDelay:1e4,reconnectionDelayMax:6e4,randomizationFactor:1},refreshTokenURL:null};e.prototype={options:null,engine:null,io:null,_reconnectionAttempts:0,_refreshTokenRequested:!1,connect:function(){this._insertEngineOption(this._getQueryEngineOption(this._getToken())),this.io=this.engine(this.options.socketURL,this.engineOptions),this._setEngineEvents()},reconnect:function(){this.trigger(t.reconnect),this.connect()},emit:function(e,t){this.io.emit(e,t)},isConnected:function(){return this.io.connected},isDisconnected:function(){return!this.isConnected()},_getToken:function(){var e=null;return e=$.cookie?$.cookie(this.options.authCookieName):e},errorHandlers:{UnauthorizedError:function(e){var t=this;this._refreshTokenRequested||$.get(t.options.refreshTokenURL,{error:e.code,token:t._getToken()},function(){t._refreshTokenRequested=!0,t.reconnect()})}},_socketEventListeners:{connect:function(e){this.trigger(t.connect,this.io)},disconnect:function(){this.trigger(t.disconnect)},reconnect:function(){this.trigger(t.reconnect)},error:function(e){this.errorHandlers[e.type]&&this.errorHandlers[e.type].bind(this)(e)}},_setEngineEvents:function(){this.io.on("connect",this._socketEventListeners.connect.bind(this)),this.io.on("disconnect",this._socketEventListeners.disconnect.bind(this)),this.io.on("reconnect",this._socketEventListeners.reconnect.bind(this)),this.io.on("error",this._socketEventListeners.error.bind(this)),this.io.on("conversationRead",function(e){this.trigger(t.conversationRead,e)}.bind(this)),this.io.on("userMessage",function(e){this.trigger(t.userMessage,e)}.bind(this)),this.io.on("systemMessage",function(e){this.trigger(t.systemMessage,e)}.bind(this)),this.io.on("communications",function(e){this.trigger(t.communications,e)}.bind(this)),this.io.on("reply-metrics:agency:rate",function(e){this.trigger(t.replyMetricsAgencyRate,e)}.bind(this)),this.io.on("reply-metrics:user:rate",function(e){this.trigger(t.replyMetricsUserRate,e)}.bind(this)),this.io.on("propertiesExcelEvent",function(e){this.trigger(t.propertiesExcelEvent,e)}.bind(this)),this.io.on("prospectionsExcelEvent",function(e){this.trigger(t.prospectionsExcelEvent,e)}.bind(this)),this.io.on("duplicatesEvent",function(e){this.trigger(t.duplicatesEvent,e)}.bind(this))},_insertEngineOption:function(e){this.engineOptions=Object.assign({},this.engineOptions,e)},_getQueryEngineOption:function(e){return{query:$.param({token:e})}}},modules.socket=e})(),modules||{}),modules=((()=>{var e;"true"!==$("html").attr("data-userauth")&&0===$("header.tools-header").length&&0===$("#tools-header-avatar").length||window.liveChatSocket||"undefined"!=typeof communicatorConfig&&communicatorConfig.enabled&&(e=new modules.socket({socketURL:communicatorConfig.endPointURL,authCookieName:communicatorConfig.authCookieName,refreshTokenURL:communicatorConfig.refreshTokenURL}),(window.liveChatSocket=e).connect())})(),window.modules||{}),modules,modules,modules;(()=>{var o=navigator.userAgent.toLowerCase();modules.device={isTouchable:function(){return"ontouchstart"in window||1<navigator.msMaxTouchPoints||1<navigator.maxTouchPoints},iOSVersion:function(){var e;return!!this.iOS()&&!(!(e=(e=navigator.appVersion.match(/OS (.*)(\d+)_(\d+)_?(\d+)?/))||this.getFirefoxOSVersion())[1]||!e[2])&&parseFloat(e[1],10)+"."+parseInt(e[2],10)},getFirefoxOSVersion:function(){return navigator.userAgent.match(/OS (\d+)_(\d+)_?(\d+)?/)},iOS:function(e){var t=!!o.match(/iphone|ipad/i),n=new RegExp("os "+e,"i");return!!(t&&!e||t&&e&&o.match(n)||this.iOS13())},iOS13:function(){return"MacIntel"===navigator.platform&&this.isTouchable()&&!window.MSStream},iPhone:function(){return!!o.match(/iphone/i)},iPad:function(){return!!o.match(/ipad/i)},androidVersion:function(){return!!this.android()&&parseFloat(o.slice(o.indexOf("android")+8))},android:function(e){var t=!!o.match(/android/i),n=new RegExp("android "+e,"i");return!!(t&&!e||t&&e&&o.match(n))},wp:function(e){var t=!!o.match(/windows phone|wp/i),n=new RegExp("os "+e+"|"+e,"i");return!!(t&&!e||t&&e&&o.match(n))},isMacOS:function(){return!!o.match(/mac os/i)},isApple:function(){return!!o.match(/applewebkit/i)},isChrome:function(){return/chrome/i.test(o)},isFirefox:function(){return/firefox/i.test(o)},isWindowsOS:function(e){var t=!!o.match(/windows/i),n=new RegExp("os "+e+"|"+e,"i");return!!(t&&!e||t&&e&&o.match(n))},windowsTablet:function(){try{return this.isWindowsOS()&&"TABLET"===modules.utils.getMedia()}catch(e){return!1}},isMobileDevice:function(){return this.iOS()||this.android()||this.wp()||this.windowsTablet()},isMobileDeviceV2:function(){return this.iOS()||this.android()||this.wp()||this.windowsTablet()||this.iOS13()},isPhone:function(){return this.isMobileDevice()&&"MOBILE"===modules.utils.getMedia()},isTablet:function(){return this.isMobileDevice()&&"TABLET"===modules.utils.getMedia()},isTabletLandscapeV2:function(){return this.isMobileDeviceV2()&&"LANDSCAPE"===modules.utils.getMediaOrientation()},isTabletLandscape:function(){return this.isMobileDevice()&&"DESKTOP"===modules.utils.getMedia()&&"LANDSCAPE"===modules.utils.getMediaOrientation()},isIpadPro:function(){return this.isApple()&&this.isMacOS()&&("DESKTOP"===modules.utils.getMedia()||"TABLET"===modules.utils.getMedia())},isRetinaDevice:function(){return 2<=window.devicePixelRatio},isInternetExplorer:function(){return!!window.MSInputMethodContext&&!!document.documentMode},isSafari:function(){return/^((?!chrome|android).)*safari/i.test(o)&&/Apple/i.test(navigator.vendor)},isMac:function(){return/Mac/i.test(o)},getDeviceType:function(){return this.isMobileDeviceV2()?"mobile":"desktop"},hasHoverCapabilities:function(){return!window.matchMedia("(hover: none)").matches}}})(),(modules=window.modules||{}).messagesNotificationTealiumTracker=(()=>{var t="header::chat",n="navigation",o="LINK";return{trackHeader:function(){var e={name:"chat",category:t,click:{type:n}};modules.markup.trackerMarkup.markupFromParameters(o,t,e)}}})(),(modules=window.modules||{}).messagesNotification=(()=>{let n={NOTIFICATION_MESSAGE:".notification-message",TAB_CONVERSATIONS:"li.conversations",USER_INFO:".user-info",USER_NAME:".user-info--username",BADGE:".badge",QUALITY:".quality"},o={BADGE:"badge",USER_BAR_SELECTED:"user-bar-selected",NOTIFICATION_MESSAGE:"notification-message",QUALITY:"quality"};function e(e){modules.messagesNotification.services.getMessagesNumberUnRead().done(e)}function t(e){if(0!==$(n.TAB_CONVERSATIONS).length){var t;if(!e.data||e.data.fraudWarning)return h();0<(t=e.data).unread?d(t.unread):i()&&l(t.unread)}}function i(){return 0<$(n.TAB_CONVERSATIONS+" "+n.BADGE).length}function r(e){var t;$(n.TAB_CONVERSATIONS).find("span"+n.BADGE).text(e),t=e,modules.device.isMobileDevice()&&$(n.USER_INFO).find("span"+n.BADGE).text(t)}function s(e){modules.device.isMobileDevice()&&($(n.USER_INFO+" "+n.USER_NAME).removeClass("icon-arrow-dropdown"),$(n.USER_INFO+" "+n.USER_NAME).addClass("notify-badge"),$(n.USER_INFO).append(e))}function a(){$(n.USER_INFO).find("span"+n.NOTIFICATION_MESSAGE).remove(),$(n.USER_INFO+" "+n.USER_NAME).removeClass("notify-badge"),$(n.USER_INFO+" "+n.USER_NAME).addClass("icon-arrow-dropdown")}function c(e){return e=99<=e?"99+":e}function l(e){var t;p()||(0<e||"99+"===e?(t=e,(i()?r:d)(t)):($(n.TAB_CONVERSATIONS).find("span"+n.NOTIFICATION_MESSAGE).remove(),a()))}function u(){return $(n.TAB_CONVERSATIONS).hasClass(o.USER_BAR_SELECTED)?$(n.TAB_CONVERSATIONS).find("span"):$(n.TAB_CONVERSATIONS).find("a")}function d(e){var t,n;p()||(i()?r(e=c(e)):(e=c(e),t=e,n='<span class="'+o.NOTIFICATION_MESSAGE+'"><span class="'+o.BADGE+'">'+t+"</span></span>",u().append(n),s(n)))}function p(){return 0<$(n.TAB_CONVERSATIONS).find("span"+n.QUALITY).length}function h(){var e;p()||($(n.TAB_CONVERSATIONS).find("span"+n.NOTIFICATION_MESSAGE).remove(),a(),e='<span class="icon-feedbk-alert quality"></span>',u().append(e),s(e))}return{checkShowQualityIconInMenu:function(e){if("FRAUD"===e.subtype||"PHISHING_AD"===e.subtype)return h();p()&&($(n.TAB_CONVERSATIONS).find("span"+n.QUALITY).remove(),$(n.USER_INFO).find("span.quality").remove(),$(n.USER_INFO+" "+n.USER_NAME).removeClass("notify-badge"),$(n.USER_INFO+" "+n.USER_NAME).addClass("icon-arrow-dropdown"))},checkNotifications:function(){e(function(e){t(e)})},changeNotificationBatch:l,existBadgeInHeader:i,getCurrentBadge:function(){return $(n.TAB_CONVERSATIONS).find("span"+n.BADGE).first().text()},buildNumber:c,showNumberUnReadAdvice:e,showMessageUnReadIcon:t}})(),(modules=window.modules||{}).messagesNotification.sessionHandler=(()=>{var e="new-messages-tooltip-showed";return{getItemFromStorage:function(){try{return window.sessionStorage.getItem(e)}catch(e){}},saveMessageShowedOnStorage:function(){try{window.sessionStorage.setItem(e,!0)}catch(e){}}}})()}(modules=window.modules||{}).messagesNotification.tooltipHandler=(()=>{var t={NEW_ANSWER_ADVICE:".new-answers-advice"};function n(e){return e&&!modules.messagesNotification.sessionHandler.getItemFromStorage()&&("undefined"==typeof config||!config.isConversationsPage)}return{handle:function(e){n(e)&&($(t.NEW_ANSWER_ADVICE).show(),modules.messagesNotification.sessionHandler.saveMessageShowedOnStorage())}}})();(modules=window.modules||{}).messagesNotification.services=(()=>{var n="/conversations/unread.ajax ";return{getMessagesNumberUnRead:function(){return e=n,$.ajax({type:"GET",contentType:"application/json; charset=utf-8",dataType:"json",url:e,data:t});var e,t}}})(),modules=window.modules||{};(()=>{var i={USER_INFO:".user-info",BADGE:".badge",MAIN_HEADER:"#main-header",TAB_CONVERSATIONS:"li.conversations"},r="userMessage",t="conversationRead",n="systemMessage",e=$(i.MAIN_HEADER),s=$(i.USER_INFO+" span").attr("data-profileid");e.hasClass("tools")||e.hasClass("tools-header")||modules.messagesNotification.showNumberUnReadAdvice(function(e){modules.messagesNotification.showMessageUnReadIcon(e),modules.messagesNotification.tooltipHandler.handle(e.data.hasNewMessages)}),window.liveChatSocket&&(window.liveChatSocket.on(r,function(e){var t,n,o;modules.observer.trigger(r,e),0!==$(i.TAB_CONVERSATIONS).length&&parseInt(s)!==e.emitterUserProfileId&&(t=0===$(i.TAB_CONVERSATIONS).find("span"+i.BADGE).length?1:"99+"===(o=modules.messagesNotification.getCurrentBadge())?o:(n=1+parseInt(o),modules.messagesNotification.buildNumber(n)),modules.messagesNotification.changeNotificationBatch(t))}),window.liveChatSocket.on(t,function(e){modules.observer.trigger(t,e),0!==$(i.TAB_CONVERSATIONS).length&&parseInt(s)===e.userProfileId&&modules.messagesNotification.checkNotifications()}),window.liveChatSocket.on(n,function(e){modules.observer.trigger(n,e),modules.messagesNotification.checkShowQualityIconInMenu(e)}))})(),(modules=window.modules||{}).communicationsNotifications=modules.communicationsNotifications||{},modules.communicationsNotifications.constServices={SELECTORS:{USER_INFO:".user-info",MAIN_HEADER:"#main-header",TAB_INBOX:".private.tools-header",COMMUNICATIONS_NOTIFICATIONS:".communications-notifications",BADGE:".badge"},EVENTS:{COMMUNICATIONS:"communications",CONVERSATION_READ:"conversationRead",REPLY_METRICS_AGENCY_RATE:"replyMetricsAgencyRate",REPLY_METRICS_USER_RATE:"replyMetricsUserRate",PROPERTIES_EXCEL:"propertiesExcelEvent",PROSPECTIONS_EXCEL:"prospectionsExcelEvent",DUPLICATES:"duplicatesEvent"},ATTRIBUTES:{PROFILE_ID:"data-profileid"},CLASSES:{BADGE:"badge",ALERT_ICON_FEEDBACK:"icon-feedbk-alert"}},(modules=window.modules||{}).communicationsNotifications=modules.communicationsNotifications||{},modules.communicationsNotifications.pageObject=(()=>{var e=modules.communicationsNotifications.constServices,n=e.SELECTORS,o=e.ATTRIBUTES,i=e.CLASSES;function r(e){var t,n=(t=e)?99<=t?"99+":t:0;a().each(function(){$(this).addClass(i.BADGE),$(this).html(n)})}function s(){a().each(function(){$(this).removeClass(i.BADGE),$(this).html("")})}function a(){return $("span"+n.COMMUNICATIONS_NOTIFICATIONS,n.TAB_INBOX)}function c(){return $("span"+n.BADGE+n.COMMUNICATIONS_NOTIFICATIONS,n.TAB_INBOX)}function l(){return 0===c().length?"":c().first().text()}return{processNewCommunicationReceived:function(e){var t;0!==$(n.TAB_INBOX).length&&(e.recipientUserProfileIds.includes(communicationNotificationConfig.userProfileId)||(e=>"ADMIN"===e||"COORDINATOR"===e)(communicationNotificationConfig.agentType)||config.agentCanManageCommunications)&&"SYSTEM"!==e.messageEmitterType&&(t=e.emitterUserProfileId,parseInt($(n.USER_INFO+" span").attr(o.PROFILE_ID))!==t)&&!e.recipientUserProfileIds.includes(e.emitterUserProfileId)&&r(0===c().length?1:"99+"===l()?99:parseInt(l())+1)},hideCommunicationsNotifications:function(){s()},renderCommunicationsNotifications:function(e){var t;if(e.data&&0!==$(n.TAB_INBOX).length)return 0===(t=e.data.unread)?s():r(t)},showExcelPropertiesDownloadSnackbar:function(e){var t="downloadExcelPropertiesToolsMessage";return window.HABJS_EXTERNAL&&window.HABJS_EXTERNAL.EXCEL_DOWNLOAD_NOTIFY?(e.filePath?window.sessionStorage.setItem(t,JSON.stringify(e)):window.sessionStorage.removeItem(t),window.HABJS_EXTERNAL.EXCEL_DOWNLOAD_NOTIFY.show(e,function(){window.sessionStorage.removeItem(t)},t)):null},showExcelProspectionsDownloadSnackbar:function(e){var t="downloadExcelProspectionsToolsMessage";return window.HABJS_EXTERNAL&&window.HABJS_EXTERNAL.EXCEL_DOWNLOAD_NOTIFY?(e.filePath?window.sessionStorage.setItem(t,JSON.stringify(e)):window.sessionStorage.removeItem(t),window.HABJS_EXTERNAL.EXCEL_DOWNLOAD_NOTIFY.show(e,function(){window.sessionStorage.removeItem(t)},t)):null},showDuplicatesSnackbar:function(e){var t="duplicatesToolsMessage";return window.HABJS_EXTERNAL&&window.HABJS_EXTERNAL.DUPLICATES_NOTIFY?(window.sessionStorage.setItem(t,JSON.stringify(e)),window.HABJS_EXTERNAL.DUPLICATES_NOTIFY.show(e,function(){window.sessionStorage.removeItem(t)},t)):(window.sessionStorage.setItem(t,JSON.stringify(e)),window.dispatchEvent(new Event("storage")))}}})(),(modules=window.modules||{}).communicationsNotifications=modules.communicationsNotifications||{},modules.communicationsNotifications.notificationHandler=(()=>{var t=modules.communicationsNotifications.constServices.EVENTS,n=modules.communicationsNotifications.pageObject;return{notifyCommunicationEvent:function(e){n.processNewCommunicationReceived(e),modules.observer.trigger(t.COMMUNICATIONS,e)},handleReadEvent:function(){n.hideCommunicationsNotifications()},handleReplyMetricsAgencyRateEvent:function(e){modules.observer.trigger(t.REPLY_METRICS_AGENCY_RATE,e)},handleReplyMetricsUserRateEvent:function(e){modules.observer.trigger(t.REPLY_METRICS_USER_RATE,e)},handleExcelPropertiesDownloadEvent:function(e){n.showExcelPropertiesDownloadSnackbar(e)},handleExcelProspectionsDownloadEvent:function(e){n.showExcelProspectionsDownloadSnackbar(e)},handleDuplicatesEvent:function(e){n.showDuplicatesSnackbar(e)}}})(),(modules=window.modules||{}).communicationsNotifications=modules.communicationsNotifications||{},modules.communicationsNotifications.services=(()=>{var n="/inbox/communications/unread.ajax ";return{getMessagesNumberUnRead:function(e){return t=n,$.ajax({type:"GET",contentType:"application/json; charset=utf-8",dataType:"json",url:t,success:e});var t}}})();(modules=window.modules||{}).communicationsNotifications=modules.communicationsNotifications||{},modules.communicationsNotifications=(()=>{var e,t;0===$("header.tools-header").length&&0===$("#tools-header-avatar").length||(e=modules.communicationsNotifications.constServices.EVENTS,t=modules.communicationsNotifications.pageObject,modules.communicationsNotifications.services.getMessagesNumberUnRead(t.renderCommunicationsNotifications),window.liveChatSocket&&(window.liveChatSocket.on(e.COMMUNICATIONS,modules.communicationsNotifications.notificationHandler.notifyCommunicationEvent),window.liveChatSocket.on(e.CONVERSATION_READ,modules.communicationsNotifications.notificationHandler.handleReadEvent),window.liveChatSocket.on(e.REPLY_METRICS_AGENCY_RATE,modules.communicationsNotifications.notificationHandler.handleReplyMetricsAgencyRateEvent),window.liveChatSocket.on(e.REPLY_METRICS_USER_RATE,modules.communicationsNotifications.notificationHandler.handleReplyMetricsUserRateEvent),window.liveChatSocket.on(e.PROPERTIES_EXCEL,modules.communicationsNotifications.notificationHandler.handleExcelPropertiesDownloadEvent),window.liveChatSocket.on(e.PROSPECTIONS_EXCEL,modules.communicationsNotifications.notificationHandler.handleExcelProspectionsDownloadEvent),window.liveChatSocket.on(e.DUPLICATES,modules.communicationsNotifications.notificationHandler.handleDuplicatesEvent)))})(),(()=>{var t=/\{\{(([@!]?)(.+?))\}\}(([\s\S]+?)(\{\{:\1\}\}([\s\S]+?))?)\{\{\/\1\}\}/g,n=/\{\{([=%])(.+?)\}\}/g;function e(e){this.t=e}function p(e,t){for(var n=t.split(".");n.length;){if(!(n[0]in e))return!1;e=e[n.shift()]}return e}function h(e,d){return e.replace(t,function(e,t,n,o,i,r,s,a){var c,l=p(d,o),u="";if(!l)return"!"==n?h(i,d):s?h(a,d):"";if(!n)return h(r,d);if("@"==n){for(c in e=d._key,t=d._val,l)l.hasOwnProperty(c)&&(d._key=c,d._val=l[c],u+=h(i,d));return d._key=e,d._val=t,u}}).replace(n,function(e,t,n){var o=p(d,n);return o||0===o?"%"==t?new Option(o).innerHTML.replace(/"/g,"&quot;"):o:""})}e.prototype.render=function(e){return h(this.t,e)},window.t=e})(),modules=window.modules||{};(()=>{var o;modules.observer=modules.observer||(o={},{trigger:function(e){var t,n=o[e];n&&(t=Array.prototype.slice.call(arguments,1),n.forEach(function(e){e.callback.apply(e.context,t)}))},on:function(e,t,n){t&&(o[e]||(o[e]=[]),o[e].push({callback:t,context:n}))},off:function(e,t){o[e]&&(o[e]=t?o[e].filter(function(e){return e.callback!==t}):[])}})})();(modules=window.modules||{}).validation=modules.validation||{_VALIDATIONS:{required:/\S/,number:/^[\d.,]*$|^$/,text:/^([a-zA-Z0-9ñÑáéíóúÁÉÍÓÚ]+\s)*[a-zA-Z0-9ñÑáéíóúÁÉÍÓÚ]+$|^$/,name:/^[a-zA-Z\u00C0-\u017F]([a-zA-Z\u00C0-\u017Fª]|'[a-zA-Z\u00C0-\u017F])(([a-zA-Z\u00C0-\u017F.ª\-\s]|'[a-zA-Z\u00C0-\u017F]){0,33})+$|^$/,phone:function(e){return null!==$(e).val().replace(/\s/g,"").match(/^(\+?\d{8,15})$|^$/)},phoneprefix:/^(0{0,3}[1-9]-?\d{0,3})$/,email:/^[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?$|^$/,validCharsEmail:/^[a-zA-Z0-9_\.\-\@\+\~]$/,validCharsPhone:/\D+/g,charactersValid:/[^[a-zA-Z0-9_\.\-\@\+\~]+/g,emailPermisive:/^([a-zA-Z0-9_\.\-ñÑáéíóúÁÉÍÓÚ\+])+\@(([a-zA-Z0-9\-ñÑáéíóúÁÉÍÓÚ])+\.)+([a-zA-Z0-9]{2,6})+$|^$/,postalCode:/^(?:\d{5}|AD\d{3})$|^\d{4}-\d{3}$|^$/i,squareMeters:/^\d*$|^$/,checkbox:function(e){return!!$('input[type="checkbox"]:checked',e).length},radio:function(e){return!!$('input[type="radio"]:checked',e).length},select:function(e){return""!==$("option:selected",e).val()},dropdown:function(e){return""!==$(e).data("value")},repeated:function(e){return this.repeatedFields(e)},multiple_emails:function(e){return this.multipleEmails(e)},url:/(^|\s)((https?:\/\/)?[\w-]+(\.[\w-]+)+\.?(:\d+)?(\/\S*)?)$/i,strongPassword:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[^\da-zA-Z]).{8,128}$/,password:/^(?=.*\d)(?=.*[a-zA-Z]).{4,100}$/,prouserid:/^([a-zA-Z0-9_\.\-ñÑáéíóúÁÉÍÓÚ\+])+\@(([a-zA-Z0-9\-ñÑáéíóúÁÉÍÓÚ])+\.)+([a-zA-Z0-9]{2,6})+$|^[p|P][0-9]{1,9}$|^$/,contact_name:function(e){var t=$('input[type="text"]',e).val()||e.val();return!(!t||0===t.length||""===t.trim()||e.hasClass("defaultText"))&&this._VALIDATIONS.name.test($.trim(t))},maximum:function(e){var t=$(e).val();return""===t||Number(t)<=parseFloat($(e).attr("data-maximum")||0)},minimum:function(e){var t=$(e).val();return""===t||Number(t)>=parseFloat($(e).attr("data-minimum")||0)},lessthan:function(e){var t,n=$(e).val();return""===n||(t=Number($("#"+$(e).attr("data-lessthan")).val()),!!isNaN(t))||n<t},morethan:function(e){var t,n=$(e).val();return""===n||(t=Number($("#"+$(e).attr("data-morethan")).val()),!!isNaN(t))||t<n},lessthanorequal:function(e){var t,n=$(e).val();return""===n||(t=Number($("#"+$(e).attr("data-lessthan")).val()),!!isNaN(t))||n<=t},morethanorequal:function(e){var t,n=$(e).val();return""===n||(t=Number($("#"+$(e).attr("data-morethan")).val()),!!isNaN(t))||t<=n},pattern:function(e){return null!==$(e).val().match($(e).attr("data-pattern")+"|^$")}},addExtraValidations:function(e){if(!(e instanceof Object))throw new TypeError("Invalid map passed.");for(var t in e)this._VALIDATIONS[t]||(this._VALIDATIONS[t]=e[t])},buildErrorNode:function(e,t,n){var o,i,r=$(e.attr("data-message-append")),s=e.attr("data-message-"+t),a="",a=void 0!==s&&!1!==s?s||"":t;r.length<=0?((o=$("<span></span>")).attr("data-validation-error-remove",""),o.addClass(n||"message-error icon-feedbk-alert"),o.text(a),0<(i=e.parent().find("[data-error-here]")).length?i.eq(0).append(o):"checkbox"===t||"radio"===t?e.before(o):e.parents("label").length?e.parents("label").append(o):o.insertAfter(e)):r.text(a)},multipleEmails:function(e){for(var t=e.val(),n=!0,o=$.trim(t).split(","),i=o.length,r=0;r<i&&n;r++)this._VALIDATIONS.email.test($.trim(o[r]))||(n=!1);return n},repeatedFields:function(e){return $(e).val()===$("#"+$(e).data("repeated-field")).val()},groupRequiredValidation:function(e){var i=this,r=!1,t=$("[data-required-group]",e),s="";return t.each(function(e,t){var n=$(t),o=n.attr("data-required-group");""!==$.trim(n.val())?(r=!0,i.removeError(n)):i.addError(n,""),0===e&&(s=n.attr("data-"+o+"-error"))}),0<t.length?r?($(".general-errors-container",e).text("").addClass("d-none"),t.each(function(e,t){i.removeError($(t))})):$(".general-errors-container",e).text(s).removeClass("d-none"):r=!0,r},buildHtmlMessages:function(e){for(var t=e.length,n=[],o=0;o<t;o++)n.push("<p>"+$("<div/>").text(e[o]).html()+"</p>");return n.join("")},validateValue:function(e,t){var n=this._VALIDATIONS[t];switch(!0){case n instanceof RegExp:return n.test(e);case n instanceof Function:return n.call(this,e);default:return!1}},scrollToInvalidField:function(){var e=document.querySelectorAll("[data-invalid]")[0];e&&e.scrollIntoView(!1)},validateFields:function(e,t){t=t||{};function n(){return $(this).parent().is(":visible")}function o(){var e,t=$(this);switch(!0){case i instanceof RegExp:s="phone"!==t.attr("id")?t.val():t.val().split(" ").join(""),r=!t.hasClass("defaultText")&&i.test($.trim(s));break;case i instanceof Function:r=i.call(l,t);break;default:r=!0}r||(u=l.isFormValid=!1,l.messages.push(t.attr("data-message-"+a)||""),l.addError(t,a,null,d),e=t.attr("name")||t.attr("data-error-name"),"radio"===a&&(e=(e=t.find("input[type=radio]").attr("data-error-name"))||t.find("input[type=radio]").attr("name")),modules.observer.trigger("validationError",{$field:t,fieldType:t.attr("type"),fieldName:e,fieldValidation:a}))}var i,r,s,a,c=this._VALIDATIONS,l=this,u=l.isFormValid=!0,d=void 0!==t.returnMessages&&t.returnMessages,p=void 0===t.scrollToFirstInvalidField||t.scrollToFirstInvalidField;if(l.messages=[],e.length<=0)throw new TypeError("Element not found.");for(a in $("[data-validation]",e).each(function(){l.removeError($(this))}),u=l.groupRequiredValidation(e),c)c.hasOwnProperty(a)&&(i=c[a],$('[data-validation~="'+a+'"]:not([data-invalid]):not([data-validation-none])',e).filter(n).each(o));return p&&l.scrollToInvalidField(),d?l.messages:u},validateOneField:function(e){var t=this._VALIDATIONS,n=e.attr("data-validation"),o=("checkbox"===e.attr("type")&&(n=n||e.closest("label").attr("data-validation")),e);return t[n]instanceof RegExp&&(o="phone"!==e.attr("id")?e.val():e.val().split(" ").join("")),t[n]instanceof Function&&(o=o.closest("label")),this.validateValue(o,n)},messages:[],isFormValid:!0,addError:function(e,t,n,o){("radio"===t||"checkbox"===t?e.find("input").nextAll("span"):"select"===t?e.parents("label").find(".dropdown-wrapper"):e).attr("data-invalid","invalid"),o||this.buildErrorNode(e,t,n)},removeError:function(e){e.removeAttr("data-invalid"),e.find("input").nextAll("span").removeAttr("data-invalid"),e.parents("label").find(".dropdown-wrapper").removeAttr("data-invalid","invalid"),e.parents("label").find(".message-error").remove();var t=$(e.attr("data-message-append"));t.length<=0?(e.parents("label").length?e.parents("label"):e.parent()).find("[data-validation-error-remove]").remove():t.text("")},showServerError:function(e,t){var n,o=e.inputName.replace(/\./g,"\\."),i=$('[name="'+o+'"]').length?$('[name="'+o+'"]'):$('[data-group="'+o+'"]'),r=(0===i.length&&(i=$('[data-name="'+o+'"]')),e.message);"hidden"===$('[name="'+o+'"]').prop("type")&&(n=$('[name="'+o+'"]').data("error-field"),i=$("#"+n).length?$("#"+n):$('[data-group="'+n+'"]')),i.is(":radio")||i.is(":checkbox")?(i.nextAll("span").attr("data-invalid","invalid"),-1===i.parents("ul").parent().html().indexOf(r)&&i.parents("ul").before('<span class="message-error">'+r+"</span>")):i.is("select")?setTimeout(function(){i.parents("label").find(".dropdown-wrapper").attr("data-invalid","invalid"),-1===i.parents("label").parent().html().indexOf(r)&&i.parents("label").append('<span class="message-error">'+r+"</span>")},1e3):(i.attr("data-invalid","invalid"),-1===i.parents("label").parent().text().indexOf(r)?i.parents("label").append('<span class="message-error">'+r+"</span>"):i.attr("data-message-"+i.prop("type"))&&i.parents("label").append('<span class="message-error">'+i.attr("data-message-"+i.prop("type"))+"</span>"))},showServerErrors:function(e,t,n){t=t||function(e){return{inputName:void 0!==e.inputName?e.inputName:e.field,message:e.message}};for(var o=0,i=e.length;o<i;o++)modules.validation.showServerError(t(e[o]),n)},removeErrors:function(e){var t=this;$("[data-validation]",e).each(function(){t.removeError($(this))})}},modules=window.modules||{};(()=>{function o(){var e=this.options.onCloseXitiAttr,t=$("["+e+"]",this.modalEl).attr(e);t&&(t=JSON.parse(t),modules.markup.trackerMarkup.sendMarkupLink(t.xtPage))}function e(e){var t,n,o;return this.blocked=(t=e,c()?!t.isEnableCloseOutsideMobile:!!t.autoCloseBlocked),this.options=Object.assign(Object.clone(s),e),this.options.id=modules.utils.generateUniqueId("dialog"),this.options.sizeClass=r[this.options.size],this.scroll=0,null===document.getElementById("dynamicDialogContainer")&&((n=document.createElement("div")).id="dynamicDialogContainer",o=n,l()?document.body.insertBefore(o,document.querySelector(".responsive-wrapper")):document.body.appendChild(o)),$("#dynamicDialogContainer").append($(a.render(this.options))),this.modalEl=document.getElementById(this.options.id),$(".modal-fader").length<=0&&(u.addClass("d-none"),$("body").append(u)),this.bindEvents(),modules.utils.makeObservable(this,["cancel","accept","open","close","destroy"]),this.on("open",function(){$("video").prop("controls",!1)}),this.on("close",function(){$("video").prop("controls",!0)}),this}function i(t){$(t.modalEl.querySelectorAll("."+t.options.autoCancelClass)).off("click").on("click",function(e){t.trigger("cancel"),e.preventDefault(),t.options.hideOnAutoCancel&&t.hide()})}function n(e){e.options.isSemiModalInMobile&&$("body, html").removeClass("semi-modal-opened")}var r,s,a,u,c,l;modules.modal=modules.modal||(s={showCloseButton:!0,title:null,content:"",buttons:"",autoCancelClass:"cancel, .cancelar",autoAcceptClass:"accept, .aceptar",destroyOnHide:!(r={S:"size-s",M:"size-m",L:"size-l"}),hideOnAutoAccept:!0,hideOnAutoCancel:!0,scrollable:!1,size:"M",role:"",onCloseXitiAttr:"data-onclose-xiti",showNewStyleClass:!1,isSemiModalInMobile:!1},a=new t('<div class="modal {{showNewStyleClass}}modal-new-style{{/showNewStyleClass}}" id="{{=id}}" data-role="{{=role}}">\t<div class="modal-wrapper">\t\t<div class="modal-box {{=sizeClass}}">\t\t\t<div class="modal-blocker"></div>\t\t\t{{showCloseButton}}<a class="icon-close close-btn" href="#"></a>{{/showCloseButton}}\t\t\t{{title}}<div class="modal-header"><h2 class="h3-simulated">{{=title}}</h2></div>{{/title}}\t\t\t<div class="modal-content">{{=content}}</div>\t\t\t{{buttons}}<div class="modal-buttons">{{=buttons}}</div>{{/buttons}}\t\t</div>\t</div></div>'),u=$('<div class="modal-fader"></div>'),c=function(){return modules.device.isMobileDeviceV2()||modules.device.isMobileDevice()},l=function(){return null!==document.querySelector(".responsive-wrapper")},e.prototype.modalEl=null,e.prototype.bindEvents=function(){var n=this;function e(e){var t=$(e.target);!t.hasClass("modal-wrapper")&&!t.hasClass("modal")||n.blocked||(e.preventDefault(),o.call(n),n.hide(),n.trigger("cancel"))}this.options.showCloseButton&&($(".modal-box > .close-btn",this.modalEl).off("click").on("click",function(e){this.trigger("cancel"),e.preventDefault(),o.call(n),this.hide()}.bind(this)),$(this.modalEl).off("mousedown",e).on("mousedown",e)),this.options.autoCancelClass&&i(this),this.options.autoAcceptClass&&this.setupAutoAccept()},e.prototype.setupAutoAccept=function(){var t=this;$(t.modalEl.querySelectorAll("."+t.options.autoAcceptClass)).off("click").on("click",function(e){$(this).off("click"),t.trigger("accept"),e.preventDefault(),t.options.hideOnAutoAccept&&(o.call(t),t.hide())})},e.prototype.show=function(){var n,o,i,r,s,a,c,l,e;this.scroll=document.documentElement.scrollTop||document.body.scrollTop,this.trigger("open"),$(window).trigger("modal:open",this),this.modalEl.style.display="block",$("body, html").addClass("modal-opened"),modules.device.android()&&$("body, html").addClass("modal-opened-android"),this.options.isSemiModalInMobile&&!$("body, html").hasClass("semi-modal-opened")&&$("body, html").addClass("semi-modal-opened"),$("body").css({top:-this.scroll}),void 0!==window.config&&"MOBILE"===modules.utils.getMedia()&&setTimeout(function(){window.scrollTo(0,0)},5),u.removeClass("d-none"),this.options.scrollable&&(n=this,o=window.innerHeight||document.documentElement.clientWidth||document.body.clientWidth,i=$(this.modalEl.querySelector(".modal-wrapper")),r=$(this.modalEl.querySelector(".modal-content")),c=i.height(),l=o/2-c/2,$(this.modalEl).addClass("focused"),$(this.modalEl).find(".modal-content, .modal-buttons").addClass("clearfix"),e=function(e,t){l=t||l,o-100<(c=e||c)?($(n.modalEl).addClass("scrollable"),i.css({"margin-top":10}),r.css({height:window.innerHeight-170})):i.css({"margin-top":l})},$(window).on("resize",function(){e()}),i.on({touchmove:function(e){var t=e.originalEvent.touches[0].clientY;s=r.scrollTop(),$(e.target).parents(".modal-box").length||(a<t?r.scrollTop(s-=10):t<a&&r.scrollTop(s+=10),a=t)},mousewheel:function(e){s=r.scrollTop(),$(e.target).parents(".modal-box").length||(e.originalEvent.wheelDelta<0?r.scrollTop(s+=100):r.scrollTop(s-=100))}}),e(i.height(),o/2-i.height()/2)),modules.markup.clicks.init(this.modalEl.id)},e.prototype.hide=function(){this.trigger("close"),$(window).trigger("modal:close",this),this.modalEl.style.display="",this.options.destroyOnHide?this.destroy():$(".modal:visible","#dynamicDialogContainer").length<=0&&($("body, html").removeClass("modal-opened"),n(this),u.addClass("d-none"),window.scrollTo(0,this.scroll)),$(window).trigger("modal:closed",this)},e.prototype.destroy=function(){this.trigger("close"),this.trigger("destroy"),this.modalEl.parentNode&&this.modalEl.parentNode.removeChild(this.modalEl),$(".modal:visible","#dynamicDialogContainer").length<=0&&($("body, html").removeClass("modal-opened"),n(this),u.addClass("d-none"),window.scrollTo(0,this.scroll))},e.prototype.setContent=function(e){this.modalEl.querySelector(".modal-content")&&("[object String]"===Object.prototype.toString.call(e)?this.modalEl.querySelector(".modal-content").innerHTML=e:$(this.modalEl.querySelector(".modal-content")).html(e),this.bindEvents())},e.prototype.setTitle=function(e){this.modalEl.querySelector(".modal-header h2")&&("[object String]"===Object.prototype.toString.call(e)?this.modalEl.querySelector(".modal-header h2").innerHTML=e:$(this.modalEl.querySelector(".modal-header h2")).html(e))},e.prototype.setButtons=function(e){this.modalEl.querySelector(".modal-buttons")&&("[object String]"===Object.prototype.toString.call(e)?this.modalEl.querySelector(".modal-buttons").innerHTML=e:$(this.modalEl.querySelector(".modal-buttons")).html(e)),this.setupAutoAccept(),i(this)},e.prototype.setRole=function(e){this.modalEl.setAttribute("data-role",e)},e.prototype.block=function(){$(".modal-blocker",this.modalEl).addClass("block"),this.isBlocked=!0},e.prototype.unblock=function(){$(".modal-blocker",this.modalEl).removeClass("block"),this.isBlocked=!1},e)})();(modules=window.modules||{}).modal=modules.modal||{},modules.utilsModal=modules.utilsModal||{RIGHT_SIDE:"right",LEFT_SIDE:"left",animationCloseModalCenter:function(t,e){var n='[data-role="'+$(t.modalEl).data("role")+'"] .modal-box',o=Math.abs($(window).scrollTop()-e.offset().top)-$(n).height()/2;$(n).animate({top:o+"px"},1e3),$(n).addClass("compress"),$(n).on("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(e){$(n).hasClass("compress")&&$(n).removeClass("compress"),t.hide()})},animationCloseModal:function(t,e,n){var o,i='[data-role="'+$(t.modalEl).data("role")+'"] .modal-box',r=Math.abs($(window).scrollTop()-e.offset().top)-$(i).height()/2;n===this.RIGHT_SIDE?(o=Math.abs(e.position().right-$(i).width()/2),$(i).animate({top:r+"px",left:o+"px"},1e3)):n===this.LEFT_SIDE&&(o=Math.abs(e.position().left-$(i).width()/2),$(i).animate({top:r+"px",right:o+"px"},1e3)),$(i).addClass("compress"),$(i).on("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(e){$(i).hasClass("compress")&&$(i).removeClass("compress"),t.hide()})}},((e,t)=>{"function"==typeof define&&define.amd?define(["exports"],t):"object"==typeof exports&&"string"!=typeof exports.nodeName?t(exports):t(e.commonJsStrict={})})(this,function(M){function n(e,t){return function(){e.apply(t,arguments)}}function e(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],a(e,n(o,this),n(i,this))}function r(n){var o=this;return null===this._state?void this._deferreds.push(n):void l(function(){var e,t=o._state?n.onFulfilled:n.onRejected;if(null===t)(o._state?n.resolve:n.reject)(o._value);else{try{e=t(o._value)}catch(e){return void n.reject(e)}n.resolve(e)}})}function o(e){try{if(e===this)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if("function"==typeof t)return void a(n(t,e),n(o,this),n(i,this))}this._state=!0,this._value=e,s.call(this)}catch(e){i.call(this,e)}}function i(e){this._state=!1,this._value=e,s.call(this)}function s(){for(var e=0,t=this._deferreds.length;e<t;e++)r.call(this,this._deferreds[e]);this._deferreds=null}function P(e,t,n,o){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=o}function a(e,t,n){var o=!1;try{e(function(e){o||(o=!0,t(e))},function(e){o||(o=!0,n(e))})}catch(e){o||(o=!0,n(e))}}"function"!=typeof Promise&&(t=this,c=setTimeout,l="function"==typeof setImmediate&&setImmediate||function(e){c(e,1)},u=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},e.prototype.catch=function(e){return this.then(null,e)},e.prototype.then=function(n,o){var i=this;return new e(function(e,t){r.call(i,new P(n,o,e,t))})},e.all=function(){var a=Array.prototype.slice.call(1===arguments.length&&u(arguments[0])?arguments[0]:arguments);return new e(function(i,r){if(0===a.length)return i([]);for(var s=a.length,e=0;e<a.length;e++)!function t(n,e){try{if(e&&("object"==typeof e||"function"==typeof e)){var o=e.then;if("function"==typeof o)return o.call(e,function(e){t(n,e)},r)}a[n]=e,0==--s&&i(a)}catch(e){r(e)}}(e,a[e])})},e.resolve=function(t){return t&&"object"==typeof t&&t.constructor===e?t:new e(function(e){e(t)})},e.reject=function(n){return new e(function(e,t){t(n)})},e.race=function(i){return new e(function(e,t){for(var n=0,o=i.length;n<o;n++)i[n].then(e,t)})},e._setImmediateFn=function(e){l=e},"undefined"!=typeof module&&module.exports?module.exports=e:t.Promise||(t.Promise=e));var t,c,l,u,d=["Webkit","Moz","ms"],p=document.createElement("div").style;function h(e){if(e in p)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=d.length;n--;)if((e=d[n]+t)in p)return e}function f(e,t){for(var n in e=e||{},t)t[n]&&t[n].constructor&&t[n].constructor===Object?(e[n]=e[n]||{},f(e[n],t[n])):e[n]=t[n];return e}function y(e){var t;"createEvent"in document?((t=document.createEvent("HTMLEvents")).initEvent("change",!1,!0),e.dispatchEvent(t)):e.fireEvent("onchange")}function v(e,t,n){var o,i;for(i in"string"==typeof t&&(o=t,(t={})[o]=n),t)e.style[i]=t[i]}function m(e,t){e.classList?e.classList.add(t):e.className+=" "+t}var w=h("transform"),g=h("transformOrigin"),b=h("userSelect"),E="translate3d",S=function(e,t,n){this.x=parseFloat(e),this.y=parseFloat(t),this.scale=parseFloat(n)},C=(S.parse=function(e){return e.style?S.parse(e.style[w]):-1<e.indexOf("matrix")||-1<e.indexOf("none")?S.fromMatrix(e):S.fromString(e)},S.fromMatrix=function(e){var t=e.substring(7).split(",");return t.length&&"none"!==e||(t=[1,0,0,1,0,0]),new S(parseInt(t[4],10),parseInt(t[5],10),parseFloat(t[0]))},S.fromString=function(e){var t=e.split(") "),n=t[0].substring(E.length+1).split(","),o=1<t.length?t[1].substring(6):1,i=1<n.length?n[0]:0,r=1<n.length?n[1]:0;return new S(i,r,o)},S.prototype.toString=function(){return E+"("+this.x+"px, "+this.y+"px, 0px) scale("+this.scale+")"},function(e){var t;e&&e.style[g]?(t=e.style[g].split(" "),this.x=parseFloat(t[0]),this.y=parseFloat(t[1])):(this.x=0,this.y=0)});function A(e,t,n){var o=t.width,i=t.height,r=e.getContext("2d");switch(e.width=t.width,e.height=t.height,r.save(),n){case 2:r.translate(o,0),r.scale(-1,1);break;case 3:r.translate(o,i),r.rotate(180*Math.PI/180);break;case 4:r.translate(0,i),r.scale(1,-1);break;case 5:e.width=i,e.height=o,r.rotate(90*Math.PI/180),r.scale(1,-1);break;case 6:e.width=i,e.height=o,r.rotate(90*Math.PI/180),r.translate(0,-i);break;case 7:e.width=i,e.height=o,r.rotate(-90*Math.PI/180),r.translate(-o,i),r.scale(1,-1);break;case 8:e.width=i,r.translate(0,e.height=o),r.rotate(-90*Math.PI/180)}r.drawImage(t,0,0,o,i),r.restore()}function L(){var e,t,n,o=this,i=o.options.viewport.type?"cr-vp-"+o.options.viewport.type:null;o.options.useCanvas=o.options.enableOrientation||k.call(o),o.data={},o.elements={},e=o.elements.boundary=document.createElement("div"),t=o.elements.viewport=document.createElement("div"),o.elements.img=document.createElement("img"),n=o.elements.overlay=document.createElement("div"),o.options.useCanvas?(o.elements.canvas=document.createElement("canvas"),o.elements.preview=o.elements.canvas):o.elements.preview=o.elements.img,m(e,"cr-boundary"),v(e,{width:o.options.boundary.width+"px",height:o.options.boundary.height+"px"}),m(t,"cr-viewport"),i&&m(t,i),v(t,{width:o.options.viewport.width+"px",height:o.options.viewport.height+"px"}),t.setAttribute("tabindex",0),m(o.elements.preview,"cr-image"),m(n,"cr-overlay"),o.element.appendChild(e),e.appendChild(o.elements.preview),e.appendChild(t),e.appendChild(n),m(o.element,"croppie-container"),o.options.customClass&&m(o.element,o.options.customClass),function(){var d,p,h,r,f,m=this,n=!1;function g(e,t){var n=m.elements.preview.getBoundingClientRect(),o=f.y+t,i=f.x+e;m.options.enforceBoundary?(r.top>n.top+t&&r.bottom<n.bottom+t&&(f.y=o),r.left>n.left+e&&r.right<n.right+e&&(f.x=i)):(f.y=o,f.x=i)}function e(e){var t;e.preventDefault(),n||(n=!0,d=e.pageX,p=e.pageY,e.touches&&(t=e.touches[0],d=t.pageX,p=t.pageY),f=S.parse(m.elements.preview),window.addEventListener("mousemove",o),window.addEventListener("touchmove",o),window.addEventListener("mouseup",i),window.addEventListener("touchend",i),document.body.style[b]="none",r=m.elements.viewport.getBoundingClientRect())}function o(e){e.preventDefault();var t,n,o,i,r,s=e.pageX,a=e.pageY,c=(e.touches&&(s=(t=e.touches[0]).pageX,a=t.pageY),s-d),l=a-p,u={};if("touchmove"==e.type&&1<e.touches.length)return n=e.touches[0],o=e.touches[1],r=(i=Math.sqrt((n.pageX-o.pageX)*(n.pageX-o.pageX)+(n.pageY-o.pageY)*(n.pageY-o.pageY)))/(h=h||i/m._currentZoom),x.call(m,r),void y(m.elements.zoomer);g(c,l),u[w]=f.toString(),v(m.elements.preview,u),N.call(m),p=a,d=s}function i(){n=!1,window.removeEventListener("mousemove",o),window.removeEventListener("touchmove",o),window.removeEventListener("mouseup",i),window.removeEventListener("touchend",i),document.body.style[b]="",T.call(m),I.call(m),h=0}m.elements.overlay.addEventListener("mousedown",e),m.elements.viewport.addEventListener("keydown",function(e){var t,n,o,i;!e.shiftKey||38!=e.keyCode&&40!=e.keyCode?37<=e.keyCode&&e.keyCode<=40&&(e.preventDefault(),t=(e=>{switch(e){case 37:return[1,0];case 38:return[0,1];case 39:return[-1,0];case 40:return[0,-1]}})(e.keyCode),f=S.parse(m.elements.preview),document.body.style[b]="none",r=m.elements.viewport.getBoundingClientRect(),o=t[0],i={},g(o,t[1]),i[w]=f.toString(),v(m.elements.preview,i),N.call(m),document.body.style[b]="",T.call(m),I.call(m),h=0):(n=0,n=38==e.keyCode?parseFloat(m.elements.zoomer.value,10)+parseFloat(m.elements.zoomer.step,10):parseFloat(m.elements.zoomer.value,10)-parseFloat(m.elements.zoomer.step,10),m.setZoom(n))}),m.elements.overlay.addEventListener("touchstart",e)}.call(this),o.options.enableZoom&&function(){var o=this,e=o.elements.zoomerWrap=document.createElement("div"),t=o.elements.zoomer=document.createElement("input");function i(){F.call(o,{value:parseFloat(t.value),origin:new C(o.elements.preview),viewportRect:o.elements.viewport.getBoundingClientRect(),transform:S.parse(o.elements.preview)})}function n(e){var t=e.wheelDelta?e.wheelDelta/1200:e.deltaY?e.deltaY/1060:e.detail?e.detail/-60:0,n=o._currentZoom+t;e.preventDefault(),x.call(o,n),i.call(o)}m(e,"cr-slider-wrap"),m(t,"cr-slider"),t.type="range",t.step="0.0001",t.value=1,t.style.display=o.options.showZoomer?"":"none",o.element.appendChild(e),e.appendChild(t),o._currentZoom=1,o.elements.zoomer.addEventListener("input",i),o.elements.zoomer.addEventListener("change",i),o.options.mouseWheelZoom&&(o.elements.boundary.addEventListener("mousewheel",n),o.elements.boundary.addEventListener("DOMMouseScroll",n))}.call(o)}function k(){return(this.options.enableExif||this.options.exif)&&window.EXIF}function x(e){this.options.enableZoom&&(this.elements.zoomer.value=$(e,4))}function F(e){var t,n,o,i=this,r=e?e.transform:S.parse(i.elements.preview),s=e?e.viewportRect:i.elements.viewport.getBoundingClientRect(),a=e?e.origin:new C(i.elements.preview);function c(){var e={};e[w]=r.toString(),e[g]=a.toString(),v(i.elements.preview,e)}i._currentZoom=e?e.value:i._currentZoom,r.scale=i._currentZoom,c(),i.options.enforceBoundary&&(n=(t=function(e){var t=this._currentZoom,n=e.width,o=e.height,i=this.options.boundary.width/2,r=this.options.boundary.height/2,s=this.elements.preview.getBoundingClientRect(),a=s.width,c=s.height,l=n/2,u=o/2,d=-1*(l/t-i),p=-1*(u/t-r),h=1/t*l,f=1/t*u;return{translate:{maxX:d,minX:d-(a*(1/t)-n*(1/t)),maxY:p,minY:p-(c*(1/t)-o*(1/t))},origin:{maxX:a*(1/t)-h,minX:h,maxY:c*(1/t)-f,minY:f}}}.call(i,s)).translate,o=t.origin,r.x>=n.maxX&&(a.x=o.minX,r.x=n.maxX),r.x<=n.minX&&(a.x=o.maxX,r.x=n.minX),r.y>=n.maxY&&(a.y=o.minY,r.y=n.maxY),r.y<=n.minY)&&(a.y=o.maxY,r.y=n.minY),c(),q.call(i),I.call(i)}function T(){var e=this,t=e._currentZoom,n=e.elements.preview.getBoundingClientRect(),o=e.elements.viewport.getBoundingClientRect(),i=S.parse(e.elements.preview.style[w]),r=new C(e.elements.preview),s=o.top-n.top+o.height/2,a=o.left-n.left+o.width/2,c={},l={},u=(c.y=s/t,c.x=a/t,l.y=(c.y-r.y)*(1-t),l.x=(c.x-r.x)*(1-t),i.x-=l.x,i.y-=l.y,{});u[g]=c.x+"px "+c.y+"px",u[w]=i.toString(),v(e.elements.preview,u)}function N(){var e=this.elements.boundary.getBoundingClientRect(),t=this.elements.preview.getBoundingClientRect();v(this.elements.overlay,{width:t.width+"px",height:t.height+"px",top:t.top-e.top+"px",left:t.left-e.left+"px"})}C.prototype.toString=function(){return this.x+"px "+this.y+"px"};O=N,U=500;var O,U,j,_,q=function(){var e=this,t=arguments,n=j&&!_;clearTimeout(_),_=setTimeout(function(){_=null,j||O.apply(e,t)},U),n&&O.apply(e,t)};function I(){var e,t=this,n=t.get();H.call(t)&&(t.options.update.call(t,n),t.$?t.$(t.element).trigger("update",n):(window.CustomEvent?e=new CustomEvent("update",{detail:n}):(e=document.createEvent("CustomEvent")).initCustomEvent("update",!0,!0,n),t.element.dispatchEvent(e)))}function H(){return 0<this.elements.preview.offsetHeight&&0<this.elements.preview.offsetWidth}function R(){var e,t,n,o,i,r=this,s=0,a=1.5,c=1,l={},u=r.elements.preview,d=r.elements.zoomer,p=new S(0,0,c),h=new C;H.call(r)&&!r.data.bound&&(r.data.bound=!0,l[w]=p.toString(),l[g]=h.toString(),l.opacity=1,v(u,l),e=u.getBoundingClientRect(),t=r.elements.viewport.getBoundingClientRect(),n=r.elements.boundary.getBoundingClientRect(),r._originalImageWidth=e.width,r._originalImageHeight=e.height,r.options.enableZoom&&(r.options.enforceBoundary&&(o=t.width/e.width,i=t.height/e.height,s=Math.max(o,i)),a<=s&&(a=s+1),d.min=$(s,4),d.max=$(a,4),c=Math.max(n.width/e.width,n.height/e.height),x.call(r,c),y(d)),r._currentZoom=p.scale=c,l[w]=p.toString(),v(u,l),r.data.points.length?function(e){if(4!=e.length)throw"Croppie - Invalid number of points supplied: "+e;var t=this,n=e[2]-e[0],o=t.elements.viewport.getBoundingClientRect(),i=t.elements.boundary.getBoundingClientRect(),r=o.left-i.left,s=o.top-i.top,a=o.width/n,c=e[1],l=-1*e[1]+s,u=-1*e[0]+r,d={};d[g]=e[0]+"px "+c+"px",d[w]=new S(u,l,a).toString(),v(t.elements.preview,d),x.call(t,a),t._currentZoom=a}.call(r,r.data.points):function(){var e=this,t=e.elements.preview.getBoundingClientRect(),n=e.elements.viewport.getBoundingClientRect(),o=e.elements.boundary.getBoundingClientRect(),i=n.left-o.left,r=n.top-o.top,s=i-(t.width-n.width)/2,a=r-(t.height-n.height)/2,c=new S(s,a,e._currentZoom);v(e.elements.preview,w,c.toString())}.call(r),T.call(r),N.call(r))}function z(t){var e,n,o=this.elements.canvas,i=this.elements.img,r=o.getContext("2d"),s=k.call(this),t=this.options.enableOrientation&&t;r.clearRect(0,0,o.width,o.height),o.width=i.width,o.height=i.height,s?(e=i,n=function(e){A(o,i,parseInt(e)),t&&A(o,i,t)},window.EXIF||n(0),EXIF.getData(e,function(){var e=EXIF.getTag(this,"Orientation");n(e)})):t&&A(o,i,t)}function X(e,t){var n,o=this,i=[];if("string"==typeof e)n=e,e={};else if(Array.isArray(e))i=e.slice();else{if(void 0===e&&o.data.url)return R.call(o),I.call(o),null;n=e.url,i=e.points||[]}o.data.bound=!1,o.data.url=n||o.data.url,o.data.points=(i||o.data.points).map(function(e){return parseFloat(e)});r=n,s=o.elements.img,(c=s||new Image).src===r?a=new Promise(function(e,t){e(c)}):(a=new Promise(function(e,t){"http"===r.substring(0,4).toLowerCase()&&c.setAttribute("crossOrigin","anonymous"),c.onload=function(){setTimeout(function(){e(c)},1)}}),c.src=r),c.style.opacity=0;var r,s,a,c,l=a;return l.then(function(){o.options.useCanvas&&(o.elements.img.exifdata=null,z.call(o,e.orientation||1)),R.call(o),I.call(o),t&&t()}),l}function $(e,t){return parseFloat(e).toFixed(t||0)}function V(){var e=this.elements.preview.getBoundingClientRect(),t=this.elements.viewport.getBoundingClientRect(),n=t.left-e.left,o=t.top-e.top,i=n+t.width,r=o+t.height,s=this._currentZoom,a=(s!==1/0&&!isNaN(s)||(s=1),this.options.enforceBoundary?0:Number.NEGATIVE_INFINITY),n=Math.max(a,n/s),o=Math.max(a,o/s),i=Math.max(a,i/s),r=Math.max(a,r/s);return{points:[$(n),$(o),$(i),$(r)],zoom:s}}var B,G={type:"canvas",format:"png",quality:1},Y=["jpeg","webp","png"];function Z(e){var n=this,o=V.call(n),t=f(G,f({},e)),i="string"==typeof e?e:t.type||"viewport",r=t.size,s=t.format,a=t.quality,c=t.backgroundColor,l="boolean"==typeof t.circle?t.circle:"circle"===n.options.viewport.type,u=n.elements.viewport.getBoundingClientRect(),d=u.width/u.height;return"viewport"===r?(o.outputWidth=u.width,o.outputHeight=u.height):"object"==typeof r&&(r.width&&r.height?(o.outputWidth=r.width,o.outputHeight=r.height):r.width?(o.outputWidth=r.width,o.outputHeight=r.width/d):r.height&&(o.outputWidth=r.height*d,o.outputHeight=r.height)),-1<Y.indexOf(s)&&(o.format="image/"+s,o.quality=a),o.circle=l,o.url=n.data.url,o.backgroundColor=c,new Promise(function(e,t){e("canvas"===i?function(e,t){var n=t.points,o=n[0],i=n[1],r=n[2]-n[0],s=n[3]-n[1],a=t.circle,c=document.createElement("canvas"),l=c.getContext("2d"),u=r,d=s;return t.outputWidth&&t.outputHeight&&(u=t.outputWidth,d=t.outputHeight),c.width=u,c.height=d,t.backgroundColor&&(l.fillStyle=t.backgroundColor,l.fillRect(0,0,u,d)),l.drawImage(e,o,i,r,s,0,0,u,d),a&&(l.fillStyle="#fff",l.globalCompositeOperation="destination-in",l.beginPath(),l.arc(u/2,d/2,u/2,0,2*Math.PI,!0),l.closePath(),l.fill()),c.toDataURL(t.format,t.quality)}.call(n,n.elements.preview,o):function(e){var t=e.points,n=document.createElement("div"),o=document.createElement("img"),i=t[2]-t[0],r=t[3]-t[1];return m(n,"croppie-result"),n.appendChild(o),v(o,{left:-1*t[0]+"px",top:-1*t[1]+"px"}),o.src=e.url,v(n,{width:i+"px",height:r+"px"}),n}.call(n,o))})}function D(e,t){var n;this.element=e,this.options=f(f({},D.defaults),t),L.call(this),this.options.url&&(n={url:this.options.url,points:this.options.points},delete this.options.url,delete this.options.points,X.call(this,n))}window.jQuery&&((B=window.jQuery).fn.croppie=function(n){var o,e;return"string"==typeof n?(o=Array.prototype.slice.call(arguments,1),e=B(this).data("croppie"),"get"===n?e.get():"result"===n?e.result.apply(e,o):this.each(function(){var e=B(this).data("croppie");if(e){var t=e[n];if(!B.isFunction(t))throw"Croppie "+n+" method not found";t.apply(e,o),"destroy"===n&&B(this).removeData("croppie")}})):this.each(function(){var e=new D(this,n);(e.$=B)(this).data("croppie",e)})}),D.defaults={viewport:{width:100,height:100,type:"square"},boundary:{width:300,height:300},orientationControls:{enabled:!0,leftClass:"",rightClass:""},customClass:"",showZoomer:!0,enableZoom:!0,mouseWheelZoom:!0,enableExif:!1,enforceBoundary:!0,enableOrientation:!1,update:function(){}},f(D.prototype,{bind:function(e,t){return X.call(this,e,t)},get:function(){return V.call(this)},result:function(e){return Z.call(this,e)},refresh:function(){return function(){R.call(this)}.call(this)},setZoom:function(e){x.call(this,e),y(this.elements.zoomer)},rotate:function(e){!function(e){if(!this.options.useCanvas)throw"Croppie: Cannot rotate without enableOrientation";var t=this.elements.canvas,n=(this.elements.img,document.createElement("canvas")),o=1;n.width=t.width,n.height=t.height,n.getContext("2d").drawImage(t,0,0),90!==e&&-270!==e||(o=6),-90!==e&&270!==e||(o=8),A(t,n,o=180!==e&&-180!==e?o:3),F.call(this)}.call(this,e)},destroy:function(){return function(){var e,t,n=this;n.element.removeChild(n.elements.boundary),e=n.element,t="croppie-container",e.classList?e.classList.remove(t):e.className=e.className.replace(t,""),n.options.enableZoom&&n.element.removeChild(n.elements.zoomerWrap),delete n.elements}.call(this)}}),M.Croppie=window.Croppie=D,"object"==typeof module&&module.exports&&(module.exports=D)}),function(){function t(e){return e instanceof t?e:this instanceof t?void(this.EXIFwrapped=e):new t(e)}"undefined"!=typeof exports?(exports="undefined"!=typeof module&&module.exports?module.exports=t:exports).EXIF=t:this.EXIF=t;var h=t.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},f=t.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},m=t.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},g=t.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function i(e){return e.exifdata}function o(o,i){function t(e){var t=c(e),n=(e=>{var t=new DataView(e);if(255!=t.getUint8(0)||216!=t.getUint8(1))return!1;for(var n,o,i,r=2,s=e.byteLength;r<s;){if(((e,t)=>56===e.getUint8(t)&&66===e.getUint8(t+1)&&73===e.getUint8(t+2)&&77===e.getUint8(t+3)&&4===e.getUint8(t+4)&&4===e.getUint8(t+5))(t,r))return(n=t.getUint8(r+7))%2!=0&&(n+=1),o=r+8+(n=0===n?4:n),i=t.getUint16(r+6+n),((e,t,n)=>{for(var o,i,r,s,a=new DataView(e),c={},l=t;l<t+n;)28===a.getUint8(l)&&2===a.getUint8(l+1)&&(s=a.getUint8(l+2))in u&&(r=a.getInt16(l+3),i=u[s],o=v(a,l+5,r),c.hasOwnProperty(i)?c[i]instanceof Array?c[i].push(o):c[i]=[c[i],o]:c[i]=o),l++;return c})(e,o,i);r++}})(e);o.exifdata=t||{},o.iptcdata=n||{},i&&i.call(o)}var e,n,r,s,a;o.src?/^data\:/i.test(o.src)?t(((e,t)=>{t=t||e.match(/^data\:([^\;]+)\;base64,/im)[1]||"",e=e.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var n=atob(e),o=n.length,i=new ArrayBuffer(o),r=new Uint8Array(i),s=0;s<o;s++)r[s]=n.charCodeAt(s);return i})(o.src)):/^blob\:/i.test(o.src)?((n=new FileReader).onload=function(e){t(e.target.result)},r=o.src,s=function(e){n.readAsArrayBuffer(e)},(a=new XMLHttpRequest).open("GET",r,!0),a.responseType="blob",a.onload=function(e){200!=this.status&&0!==this.status||s(this.response)},a.send()):((e=new XMLHttpRequest).onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";t(e.response),e=null},e.open("GET",o.src,!0),e.responseType="arraybuffer",e.send(null)):window.FileReader&&(o instanceof window.Blob||o instanceof window.File)&&((n=new FileReader).onload=function(e){t(e.target.result)},n.readAsArrayBuffer(o))}function c(e){var t=new DataView(e);if(255!=t.getUint8(0)||216!=t.getUint8(1))return!1;for(var n=2,o=e.byteLength;n<o;){if(255!=t.getUint8(n))return!1;if(225==t.getUint8(n+1)){var i=t,r=n+4;if(t.getUint16(n+2),"Exif"!=v(i,r,4))return!1;var s,a,c,l,u,d=r+6;if(18761==i.getUint16(d))s=!1;else{if(19789!=i.getUint16(d))return!1;s=!0}if(42!=i.getUint16(d+2,!s))return!1;var p=i.getUint32(d+4,!s);if(p<8)return!1;if((a=y(i,d,d+p,f,s)).ExifIFDPointer)for(c in l=y(i,d,d+a.ExifIFDPointer,h,s)){switch(c){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":l[c]=g[c][l[c]];break;case"ExifVersion":case"FlashpixVersion":l[c]=String.fromCharCode(l[c][0],l[c][1],l[c][2],l[c][3]);break;case"ComponentsConfiguration":l[c]=g.Components[l[c][0]]+g.Components[l[c][1]]+g.Components[l[c][2]]+g.Components[l[c][3]]}a[c]=l[c]}if(a.GPSInfoIFDPointer)for(c in u=y(i,d,d+a.GPSInfoIFDPointer,m,s))"GPSVersionID"===c&&(u[c]=u[c][0]+"."+u[c][1]+"."+u[c][2]+"."+u[c][3]),a[c]=u[c];return a}n+=2+t.getUint16(n+2)}}var u={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};function y(e,t,n,o,i){for(var r,s=e.getUint16(n,!i),a={},c=0;c<s;c++)a[o[e.getUint16(r=n+12*c+2,!i)]]=((e,t,n,o)=>{var i,r,s,a,c,l,u=e.getUint16(t+2,!o),d=e.getUint32(t+4,!o),p=e.getUint32(t+8,!o)+n;switch(u){case 1:case 7:if(1==d)return e.getUint8(t+8,!o);for(i=4<d?p:t+8,r=[],a=0;a<d;a++)r[a]=e.getUint8(i+a);return r;case 2:return v(e,i=4<d?p:t+8,d-1);case 3:if(1==d)return e.getUint16(t+8,!o);for(i=2<d?p:t+8,r=[],a=0;a<d;a++)r[a]=e.getUint16(i+2*a,!o);return r;case 4:if(1==d)return e.getUint32(t+8,!o);for(r=[],a=0;a<d;a++)r[a]=e.getUint32(p+4*a,!o);return r;case 5:if(1==d)return c=e.getUint32(p,!o),l=e.getUint32(p+4,!o),(s=new Number(c/l)).numerator=c,s.denominator=l,s;for(r=[],a=0;a<d;a++)c=e.getUint32(p+8*a,!o),l=e.getUint32(p+4+8*a,!o),r[a]=new Number(c/l),r[a].numerator=c,r[a].denominator=l;return r;case 9:if(1==d)return e.getInt32(t+8,!o);for(r=[],a=0;a<d;a++)r[a]=e.getInt32(p+4*a,!o);return r;case 10:if(1==d)return e.getInt32(p,!o)/e.getInt32(p+4,!o);for(r=[],a=0;a<d;a++)r[a]=e.getInt32(p+8*a,!o)/e.getInt32(p+4+8*a,!o);return r}})(e,r,t,i);return a}function v(e,t,o){var i="";for(n=t;n<t+o;n++)i+=String.fromCharCode(e.getUint8(n));return i}t.getData=function(e,t){return!((e instanceof Image||e instanceof HTMLImageElement)&&!e.complete||(i(e)?t&&t.call(e):o(e,t),0))},t.getTag=function(e,t){if(i(e))return e.exifdata[t]},t.getAllTags=function(e){if(!i(e))return{};var t,n=e.exifdata,o={};for(t in n)n.hasOwnProperty(t)&&(o[t]=n[t]);return o},t.pretty=function(e){if(!i(e))return"";var t,n=e.exifdata,o="";for(t in n)n.hasOwnProperty(t)&&("object"==typeof n[t]?n[t]instanceof Number?o+=t+" : "+n[t]+" ["+n[t].numerator+"/"+n[t].denominator+"]\r\n":o+=t+" : ["+n[t].length+" values]\r\n":o+=t+" : "+n[t]+"\r\n");return o},t.readFromBinaryFile=c,"function"==typeof define&&define.amd&&define("exif-js",[],function(){return t})}.call(this);var avatar=avatar||{};function obtainAvatarAndSetBackground(e,t,n){return $.get(e).then(function(e){return e&&e.uri&&(t.dataset.renderInitials=!1,t.style.backgroundImage="url("+e.uri+")"),n})}function toolsAvatar(e,t){if(e){var n=e,o=getAvatarUrl(e);if(o)return t=t||n.dataset.profileid,obtainAvatarAndSetBackground(o=o.replace(/\{.*\}/,t),n,e)}}function profileToolsAvatar(){var e,t=document.getElementsByClassName("avatar")[1],n=t.dataset.avatarurl;if(n)return e=t.dataset.profileid,obtainAvatarAndSetBackground(n=n.replace(/\{.*\}/,e),t)}function getAvatarUrl(e){return"undefined"!=typeof avatarConfig?avatarConfig.imageURL:e.dataset.avatarurl}avatar.uploader=(()=>{var t,r,s,a,n,o,c;if("undefined"!=typeof avatarConfig)return t={viewport:{width:200,height:200},boundary:{width:300,height:300},showZoomer:!0,enableOrientation:!1,exif:!0},r={type:"canvas",size:{width:200,height:200},format:"jpeg",quality:.8},s={url:avatarConfig.uploadURL,filename:"file",mimetype:"image/jpeg"},a=200,e.prototype.hookFileInput=function(e,o){var s;modules.utils.uploadBinarySupported?(s=this,e.on("change",function(){var i,e,r,t;e=s,r=function(e,t,n){n.w<a||n.h<a?s.trigger("small-dim"):s.trigger("nice-file"),s.widget.bind({url:e}),o&&o()},(i=this).files&&i.files[0]?((t=new FileReader).onload=function(n){var o=new Image;o.addEventListener("load",function(){var e=o.width,t=o.height;o=null,r(n.target.result,i.files[0].size,{w:e,h:t})}),o.addEventListener("error",function(){e.trigger("upload-error")}),o.src=n.target.result},t.readAsDataURL(i.files[0]),setTimeout(function(){$(i).val("")},5e3)):""!==$(i).val()&&e.trigger("bad-browser")})):(e.parent().on("click",function(){this.trigger("bad-browser")}.bind(this)),e.remove())},e.prototype.showBrowserSuggestions=function(){var e,t,n,o,i;modules.utils.uploadBinarySupported||(e=new modules.modal({title:c.title,content:c.content,size:"S",showNewStyleClass:!0}),$("#suggested-browser-link",e.modalEl).attr("href",(t={firefox:"https://www.mozilla.org/firefox",chrome:"https://google.com/chrome/",msie:"http://ie.microsoft.com/",safari:"https://www.apple.com/safari",opera:"https://www.opera.com/"},n=navigator.userAgent.toLowerCase(),o="firefox",i=Object.keys(t).filter(function(e){return-1!==n.indexOf(e)}),t[o=i.length?i[0]:o])),e.show())},$(document).ready(function(){n=$("#avatup-widget-tmpl").html(),o=$("#avatup-widget-buttons-tmpl").html(),c={title:$("#avatup-widget-badbrowser-title-tmpl").html(),content:$("#avatup-widget-badbrowser-content-tmpl").html()}}),e;function e(e,i){$(e).html(n),this.widget=new Croppie($("#croppie-container",e)[0],t),this.hookFileInput($("#avatup-upload",e)),i.buttonContainer||($(".avatup-container",e).append('<div class="actions"></div>'),i.buttonContainer=$(".actions",e)),$(i.buttonContainer).html(o),$("#avatup-go",i.buttonContainer).on("click",function(e){var t,n,o;e.preventDefault(),modules.markup.trackerMarkup.sendMarkupLink("your-account::profile::add-photo::save"),i.noUploadMode?(o=this).widget.result(r).then(function(e){o.trigger("srcCroppedGenerated",e)}):(t=this,n=i.profileId,t.widget.result(r).then(function(e){modules.utils.uploadBinary(s.url,e,s.filename,s.mimetype,{userProfileId:n},function(e){!1===e||!e&&""!==e?t.trigger("upload-error"):t.trigger("uploaded",e)})}))}.bind(this)),$("#avatup-cancel",i.buttonContainer).on("click",function(){this.trigger("cancelled"),modules.markup.trackerMarkup.sendMarkupLink("your-account::profile::add-photo::cancel")}.bind(this)),$("#avatup-choose-another",".avatup-container").on("click",function(){modules.markup.trackerMarkup.sendMarkupLink("your-account::profile::add-photo::choose-other")}.bind(this)),modules.utils.makeObservable(this,["uploaded","cancelled","small-size","small-dim","bad-type","nice-file","bad-browser","upload-error"]),this.on("bad-browser",this.showBrowserSuggestions.bind(this))}})(),(avatar=avatar||{}).modal=(()=>{var a,c;if("undefined"!=typeof avatarConfig)return a={title:"",content:"",buttons:'<span class="modal-inner"></span>'},e.prototype.destroy=function(){this.modal.destroy()},$(document).ready(function(){a.title=$("#avatup-modal-title-tmpl").html(),c={mindim:$("#avatup-widget-mess-mindim").html()}}),e;function l(e,t){avatar.paint(e,t)}function e(t,n,o,e){var i=this,r=new modules.modal({title:a.title,content:a.content,buttons:a.buttons,role:"avatar-uploader",size:"S",showNewStyleClass:!0}),s=new avatar.uploader($(".modal-content",r.modalEl),{buttonContainer:$(".modal-buttons",r.modalEl),profileId:o,noUploadMode:e});s.hookFileInput($(t),function(){i.trigger("working"),r.show()}),s.on("cancelled",function(){$(t).val(""),$(".avatup-feedback #avatup-upload-smallpic",r.modalEl).val(""),r.hide(),i.trigger("cancel")}),s.on("srcCroppedGenerated",function(e){r.hide(),l(n,o),i.trigger("srcCroppedGeneratedSuccess",e)}),s.on("uploaded",function(e){$(t).val(""),$(".avatup-feedback #avatup-upload-smallpic",r.modalEl).val(""),r.hide(),l(n,o),i.trigger("success",e)}),s.on("small-dim",function(){$(".avatup-default-message",r.modalEl).hide(),$(".avatup-feedback",r.modalEl).removeClass("feedback contextual success warning icon-feedbk-ko icon-feedbk-ok").addClass("feedback contextual warning icon-feedback-ko").show().html(c.mindim),s.hookFileInput($(".avatup-feedback #avatup-upload-smallpic",r.modalEl))}),s.on("nice-file",function(){$(".avatup-feedback",r.modalEl).removeClass("feedback contextual success warning feedbk-ko feedbk-ok").hide().html(""),$(".avatup-default-message",r.modalEl).show()}),s.on("bad-browser",function(){r.hide(),i.trigger("cancel")}),s.on("upload-error",function(){$(t).val(""),$(".avatup-feedback #avatup-upload-smallpic",r.modalEl).val(""),r.hide(),i.trigger("fail")}),this.modal=r,modules.utils.makeObservable(this,["working","fail","success","cancel"])}})(),(avatar=avatar||{}).paint=function(e,t){var n,o=$(e);if(0!==o.length&&(t=t||o.data("profileid"),n="undefined"!=typeof avatarConfig?avatarConfig.imageURL:o.data("avatarurl")))return n=n.replace(/\{.*\}/,t),$.get(n).then(function(e){e&&e.uri?o.html('<img src="'+e.uri+'" />'):o.data("render-initials")?o.html('<span class="avatar-placeholder">'+o.data("initials")+"</span>"):o.html('<span class="no-avatar-icon icon-user"></span>')}).fail(function(){o.data("render-initials")?o.html('<span class="avatar-placeholder">'+o.data("initials")+"</span>"):o.html('<span class="no-avatar-icon icon-user"></span>')})},avatar.paintTools=toolsAvatar,avatar.paintProfileTools=profileToolsAvatar;var TOOLS_HEADER_AVATAR="avatar";(()=>{if(0<$(".user-info .avatar-small-inline").length){avatar.paint($(".user-info .avatar-small-inline"));for(var e=document.getElementsByClassName(TOOLS_HEADER_AVATAR),t=0;t<e.length;t++){var n=e[t];n&&avatar.paintTools(n)}}})();